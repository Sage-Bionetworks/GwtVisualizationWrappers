(function e$$0(E,x,c){function h(v,t){if(!x[v]){if(!E[v]){var D="function"==typeof require&&require;if(!t&&D)return D(v,!0);if(w)return w(v,!0);throw Error("Cannot find module '"+v+"'");}D=x[v]={exports:{}};E[v][0].call(D.exports,function(f){var b=E[v][1][f];return h(b?b:f)},D,D.exports,e$$0,E,x,c)}return x[v].exports}for(var w="function"==typeof require&&require,I=0;I<c.length;I++)h(c[I]);return h})({1:[function(k,E,x){function c(){}function h(b,g,f,a,d){b.slice(0,10).fetch(function(e){return e?
w(b,g,f,a,d):a(null,"Couldn't access BAM.")},{timeout:5E3})}function w(C,g,f,a,d){function e(d){if(!d)return a(null,"Couldn't access BAM");d=l(d,d.byteLength);d=new Uint8Array(d);var e=v(d,0);if(21840194!=e)return a(null,"Not a BAM file, magic=0x"+e.toString(16));for(var m=v(d,4),u="",e=0;e<m;++e)u+=String.fromCharCode(d[e+8]);u=v(d,m+8);m+=12;p.chrToIndex={};p.indexToChr=[];for(e=0;e<u;++e){for(var g=v(d,m),q="",b=0;b<g-1;++b)q+=String.fromCharCode(d[m+4+b]);v(d,m+g+4);p.chrToIndex[q]=e;0==q.indexOf("chr")?
p.chrToIndex[q.substring(3)]=e:p.chrToIndex["chr"+q]=e;p.indexToChr.push(q);m=m+8+g}if(p.indices)return a(p)}var p=new c;p.data=C;p.bai=g;p.indexChunks=f;var q=p.indexChunks?p.indexChunks.minBlockIndex:1E9;if(p.indexChunks){g=p.indexChunks.chunks;p.indices=[];for(var m=0;m<g.length;m++)p.indices[m]=null;p.data.slice(0,q).fetch(e)}else p.bai.fetch(function(m){var n,g,u;if(m){var A=new Uint8Array(m),F=v(A,0);if(21578050!=F)m=a(null,"Not a BAI file, magic=0x"+F.toString(16));else{F=v(A,4);p.indices=
[];for(var z=8,L=0;L<F;++L){var y=z;n=A;var l=u=y;g=v(n,l);for(var l=l+4,c=0;c<g;++c){v(n,l);var t=v(n,l+4),l=l+(8+16*t)}for(var c=v(n,l),l=l+4,t=1E9,H=l,k=0;k<c;++k){var h=b(n,H),H=H+8;if(h){n=h.block;0<h.offset&&(n+=65536);n<t&&(t=n);break}}l+=8*c;n=t;u=l-u;z+=u;q=Math.min(n,q);0<g&&(p.indices[L]=new Uint8Array(m,y,z-y))}m=!0}}else m="Couldn't access BAI";!0!==m?p.bai.url&&"undefined"===typeof d?(p.bai.url=p.data.url.replace(/.bam$/,".bai"),w(C,p.bai,f,a,!0)):a(null,m):p.data.slice(0,q).fetch(e)})}
function I(){}if("undefined"!==typeof k){k("./spans");x=k("./bin");var v=x.readInt,t=x.readShort,D=x.readByte,f=x.readFloat;k=k("./lh3utils");var b=k.readVob,l=k.unbgzf,H=k.reg2bins,J=k.Chunk}k={MULTIPLE_SEGMENTS:1,ALL_SEGMENTS_ALIGN:2,SEGMENT_UNMAPPED:4,NEXT_SEGMENT_UNMAPPED:8,REVERSE_COMPLEMENT:16,NEXT_REVERSE_COMPLEMENT:32,FIRST_SEGMENT:64,LAST_SEGMENT:128,SECONDARY_ALIGNMENT:256,QC_FAIL:512,DUPLICATE:1024,SUPPLEMENTARY:2048};c.prototype.blocksForRange=function(C,g,f){var a=this.indices[C];if(!a)return[];
C=H(g,f);for(var d=[],e=0;e<C.length;++e)d[C[e]]=!0;C=[];for(var p=[],e=v(a,0),q=4,m=0;m<e;++m){var r=v(a,q),n=v(a,q+4),q=q+8;if(d[r])for(var B=0;B<n;++B){var u=b(a,q),A=b(a,q+8);(4681>r?p:C).push(new J(u,A));q+=16}else q+=16*n}e=v(a,q);d=null;g=Math.min(g>>14,e-1);f=Math.min(f>>14,e-1);for(e=g;e<=f;++e)(g=b(a,q+4+8*e))&&(!d||g.block<d.block||g.offset<d.offset)&&(d=g);a=[];if(null!=d)for(e=0;e<p.length;++e)f=p[e],f.maxv.block>=d.block&&f.maxv.offset>=d.offset&&a.push(f);p=a;a=[];for(e=0;e<p.length;++e)a.push(p[e]);
for(e=0;e<C.length;++e)a.push(C[e]);a.sort(function(a,d){var e=a.minv.block-d.minv.block;return 0!=e?e:a.minv.offset-d.minv.offset});C=[];if(0<a.length){p=a[0];for(e=1;e<a.length;++e)f=a[e],f.minv.block==p.maxv.block?p=new J(p.minv,f.maxv):(C.push(p),p=f);C.push(p)}return C};c.prototype.fetch=function(b,g,f,a,d){function e(){if(B>=m.length)return a(n);if(u){var r=new Uint8Array(u),r=p.readBamRecords(r,m[B].minv.offset,n,g,f,q,d);u=null;++B;return r?a(n):e()}var b=m[B],r=b.minv.block;p.data.slice(r,
b.maxv.block+65536-r).fetch(function(a){u=l(a,b.maxv.block-b.minv.block+1);return e()})}var p=this;d=d||{};var q=this.chrToIndex[b],m;if(void 0===q)m=[];else{if(null===this.indices[q]&&this.indexChunks.chunks[q]){var r=this.indexChunks.chunks[q];return this.bai.slice(r[0],r[1]).fetch(function(e){e=new Uint8Array(e);this.indices[q]=e;return this.fetch(b,g,f,a,d)}.bind(this))}(m=this.blocksForRange(q,g,f))||a(null,"Error in index fetch")}var n=[],B=0,u;e()};var K="=ACxGxxxTxxxxxxN".split(""),y="MIDNSHP=X???????".split("");
c.prototype.readBamRecords=function(b,g,l,a,d,e,p){for(;;){var q=v(b,g),q=g+q+4;if(q>=b.length)return!1;var m=new I,r=v(b,g+4),n=v(b,g+8),B=v(b,g+12),u=(B&65280)>>8,A=B&255,B=v(b,g+16),F=(B&4294901760)>>16,z=B&65535,B=v(b,g+20),L=v(b,g+24),c=v(b,g+28);v(b,g+32);m.segment=this.indexToChr[r];m.flag=F;m.pos=n;m.mq=u;p.light&&(m.seqLength=B);if(!p.light){0<=L&&(m.nextSegment=this.indexToChr[L],m.nextPos=c);u="";for(n=0;n<A-1;++n)u+=String.fromCharCode(b[g+36+n]);m.readName=u;g=g+36+A;A="";for(n=0;n<z;++n)u=
v(b,g),A=A+(u>>4)+y[u&15],g+=4;m.cigar=A;z="";A=B+1>>1;for(n=0;n<A;++n)u=b[g+n],z+=K[(u&240)>>4],z.length<B&&(z+=K[u&15]);g+=A;m.seq=z;z="";for(n=0;n<B;++n)z+=String.fromCharCode(b[g+n]+33);g+=B;for(m.quals=z;g<q;){z=String.fromCharCode(b[g],b[g+1]);A=String.fromCharCode(b[g+2]);if("A"==A)A=String.fromCharCode(b[g+3]),g+=4;else if("i"==A||"I"==A)A=v(b,g+3),g+=7;else if("c"==A||"C"==A)A=b[g+3],g+=4;else if("s"==A||"S"==A)A=t(b,g+3),g+=5;else if("f"==A)A=f(b,g+3),g+=7;else if("Z"==A||"H"==A)for(g+=
3,A="";n=b[g++],0!=n;)A+=String.fromCharCode(n);else if("B"==A){A=String.fromCharCode(b[g+3]);n=v(b,g+4);if("i"==A||"I"==A||"f"==A)u=4,F="f"==A?f:v;else if("s"==A||"S"==A)u=2,F=t;else if("c"==A||"C"==A)u=1,F=D;else throw"Unknown array type "+A;g+=8;A=[];for(L=0;L<n;++L)A.push(F(b,g)),g+=u}else throw"Unknown type "+A;m[z]=A}}if(!a||m.pos<=d&&m.pos+B>=a)void 0!==e&&r!=e||l.push(m);if(m.pos>d)return!0;g=q}};"undefined"!==typeof E&&(E.exports={makeBam:h,BAM_MAGIC:21840194,BAI_MAGIC:21578050,BamFlags:k})},
{"./bin":3,"./lh3utils":8,"./spans":10}],2:[function(k,E,x){function c(g,b){return g[b]+256*g[b+1]+65536*g[b+2]+16777216*g[b+3]+4294967296*g[b+4]}function h(){}function w(g,b,a,d){this.bwg=g;this.cirTreeOffset=b;this.cirTreeLength=a;this.isSummary=d}function I(g,b,a){var d=new h;d.data=g;d.name=a;d.data.slice(0,512).salted().fetch(function(a){if(!a)return b(null,"Couldn't fetch file");var p=new Uint8Array(a),g=new Int16Array(a);a=new Int32Array(a);var m=p[0]+256*p[1]+65536*p[2]+16777216*p[3];if(2291137574==
m)d.type="bigwig";else if(2273964779==m)d.type="bigbed";else return 654086024==m||3958540679==m?b(null,"Currently don't support big-endian BBI files"):b(null,"Not a supported format, magic=0x"+m.toString(16));d.version=g[2];d.numZoomLevels=g[3];d.chromTreeOffset=c(p,8);d.unzoomedDataOffset=c(p,16);d.unzoomedIndexOffset=c(p,24);d.fieldCount=g[16];d.definedFieldCount=g[17];d.asOffset=c(p,36);d.totalSummaryOffset=c(p,44);d.uncompressBufSize=a[13];d.extHeaderOffset=c(p,56);d.zoomLevels=[];for(g=0;g<d.numZoomLevels;++g){var m=
a[6*g+16],r=c(p,24*g+72),n=c(p,24*g+80);d.zoomLevels.push({reduction:m,dataOffset:r,indexOffset:n})}d.readChromTree(function(){d.getAutoSQL(function(a){d.schema=a;return b(d)})})},{timeout:5E3})}function v(g,b,a,d,e){this.bbi=g;this.type=b;this.fieldCount=a;this.offset=d;this.field=e}if("undefined"!==typeof k){x=k("./spans");var t=x.Range,D=x.union,f=x.intersection;x=k("./das");var b=x.DASFeature,l=x.DASGroup,H=k("./utils").shallowCopy,J=k("./bin").readInt;k=k("jszlib");var K=k.inflateBuffer,y=k.arrayCopy}var C=
/^[0-9]+,[0-9]+,[0-9]+/;h.prototype.readChromTree=function(g){var b=this;this.chromsToIDs={};this.idsToChroms={};this.maxID=0;var a=this.unzoomedDataOffset,a=a+4-(a-this.chromTreeOffset&3);this.data.slice(this.chromTreeOffset,a-this.chromTreeOffset).fetch(function(a){var e=new Uint8Array(a),p=new Int16Array(a),q=(new Int32Array(a))[2];c(e,16);var m=function(a){var d=e[a],g=p[a/2+1];a+=4;for(var u=0;u<g;++u)if(0==d){a+=q;var A=c(e,a);a+=8;A-=b.chromTreeOffset;m(A)}else{for(var A="",f=0;f<q;++f){var z=
e[a++];0!=z&&(A+=String.fromCharCode(z))}f=e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a+0];a+=8;b.chromsToIDs[A]=f;0==A.indexOf("chr")&&(b.chromsToIDs[A.substr(3)]=f);b.idsToChroms[f]=A;b.maxID=Math.max(b.maxID,f)}};m(32);g(b)})};w.prototype.readWigData=function(g,b,a,d){g=this.bwg.chromsToIDs[g];if(void 0===g)return d([]);this.readWigDataById(g,b,a,d)};w.prototype.readWigDataById=function(g,b,a,d){var e=this;if(this.cirHeader){var p=[],q=0;Date.now();var m=function(d,e,m,p){return(0>g||d==g)&&e<=a&&m>=b},
r=function(a,r){e.bwg.instrument&&console.log("level="+r+"; offset="+a+"; time="+(Date.now()|0));q+=a.length;if(1==a.length&&48==a[0]-e.cirTreeOffset&&e.cachedCirRoot)B(e.cachedCirRoot,0,r),--q,0==q&&e.fetchFeatures(m,p,d);else{for(var g=4+32*e.cirBlockSize,b,f=0;f<a.length;++f){var l=new t(a[f],a[f]+g);b=b?D(b,l):l}g=b.ranges();for(b=0;b<g.length;++b)n(a,g[b],r)}},n=function(a,r,n,g){r.max();r.min();e.bwg.data.slice(r.min(),r.max()-r.min()).fetch(function(g){for(var b=0;b<a.length;++b)r.contains(a[b])&&
(B(g,a[b]-r.min(),n),48==a[b]-e.cirTreeOffset&&0==a[b]-r.min()&&(e.cachedCirRoot=g),--q,0==q&&e.fetchFeatures(m,p,d))})},B=function(d,e,m){var n=new Uint8Array(d),q=new Int16Array(d);d=new Int32Array(d);var B=n[e],q=q[e/2+1];e+=4;if(0!=B)for(B=0;B<q;++B){var f=e/4,l=d[f],C=d[f+1],y=d[f+2],f=d[f+3],t=c(n,e+16);m=c(n,e+24);(0>g||l<g||l==g&&C<=a)&&(0>g||y>g||y==g&&f>=b)&&p.push({offset:t,size:m});e+=32}else{for(var v=[],B=0;B<q;++B)f=e/4,l=d[f],C=d[f+1],y=d[f+2],f=d[f+3],t=c(n,e+16),(0>g||l<g||l==g&&
C<=a)&&(0>g||y>g||y==g&&f>=b)&&v.push(t),e+=24;0<v.length&&r(v,m+1)}};r([e.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(m){e.cirHeader=m;m=new Int32Array(e.cirHeader);e.cirBlockSize=m[1];e.readWigDataById(g,b,a,d)})};w.prototype.fetchFeatures=function(g,f,a){var d=this;f.sort(function(a,d){return(a.offset|0)-(d.offset|0)});if(0==f.length)a([]);else{var e=[],p=function(a,p,n,g){g||(g={});var u=new b;u._chromId=a;u.segment=d.bwg.idsToChroms[a];u.min=p;u.max=n;
u.type=d.bwg.type;for(var q in g)u[q]=g[q];e.push(u)},q=function(){if(0==f.length)Date.now(),a(e);else{var m=f[0];if(m.data)d.parseFeatures(m.data,p,g),f.splice(0,1),q();else{for(var r=m.offset,n=m.size,m=1;m<f.length&&f[m].offset==r+n;)n+=f[m].size,++m;d.bwg.data.slice(r,n).fetch(function(a){for(var e=0,m=0;e<n;){var p=f[m],r;0<d.bwg.uncompressBufSize?r=K(a,e+2,p.size-2):(r=new Uint8Array(p.size),y(new Uint8Array(a,e,p.size),0,r,0,p.size),r=r.buffer);p.data=r;e+=p.size;++m}q()})}}};q()}};w.prototype.parseFeatures=
function(g,b,a){var d=new Uint8Array(g);if(this.isSummary)for(var e=new Int16Array(g),p=new Int32Array(g),q=new Float32Array(g),d=g.byteLength/32,e=0;e<d;++e){g=p[8*e];var m=p[8*e+1],r=p[8*e+2],n=p[8*e+3],B=q[8*e+5],u=q[8*e+6];a(g,m+1,r)&&(n={type:"bigwig",score:u/n,maxScore:B},"bigbed"==this.bwg.type&&(n.type="density"),b(g,m+1,r,n))}else if("bigwig"==this.bwg.type)if(e=new Int16Array(g),p=new Int32Array(g),q=new Float32Array(g),g=p[0],B=p[1],u=p[3],n=p[4],m=d[20],d=e[11],3==m)for(e=0;e<d;++e){var A=
q[e+6],p=B+e*u+1,m=B+e*u+n;a(g,p,m)&&b(g,p,m,{score:A})}else if(2==m)for(e=0;e<d;++e)m=p[2*e+6]+1,r=m+n-1,A=q[2*e+7],a(g,m,r)&&b(g,m,r,{score:A});else if(1==m)for(e=0;e<d;++e)m=p[3*e+6]+1,r=p[3*e+7],A=q[3*e+8],m>r&&(m=r),a(g,m,r)&&b(g,m,r,{score:A});else console.log("Currently not handling bwgType="+m);else if("bigbed"==this.bwg.type)for(e=0,n=this.bwg.definedFieldCount,B=this.bwg.schema;e<d.length;){g=d[e+3]<<24|d[e+2]<<16|d[e+1]<<8|d[e+0];m=d[e+7]<<24|d[e+6]<<16|d[e+5]<<8|d[e+4];r=d[e+11]<<24|d[e+
10]<<16|d[e+9]<<8|d[e+8];e+=12;for(A="";;)if(u=d[e++],0!=u)A+=String.fromCharCode(u);else break;var u={},F;F=0<A.length?A.split("\t"):[];0<F.length&&3<n&&(u.label=F[0]);1<F.length&&4<n&&(A=parseInt(F[1]),isNaN(A)||(u.score=A));2<F.length&&5<n&&(u.orientation=F[2]);5<F.length&&8<n&&(A=F[5],C.test(A)&&(u.itemRgb="rgb("+A+")"));if(F.length>n-3&&B)for(A=n-3;A<F.length;++A)u[B.fields[A+3].name]=F[A];if(a(g,m+1,r,F))if(12>n)b(g,m+1,r,u);else{var A=F[3]|0,z=F[4]|0,y=F[6]|0,c=F[7].split(","),v=F[8].split(",");
u.exonFrames&&(q=u.exonFrames.split(","),u.exonFrames=void 0);u.type="transcript";var h=new l;for(p in u)h[p]=u[p];h.id=F[0];h.segment=this.bwg.idsToChroms[g];h.min=m+1;h.max=r;h.notes=[];u.groups=[h];if(9<F.length){var k=r=u.geneName||F[9];10<F.length&&(k=F[10]);u.geneName2&&(k=u.geneName2);F=H(h);F.id=r;F.label=k;F.type="gene";u.groups.push(F)}r=[];for(F=0;F<y;++F)h=(v[F]|0)+m,h=new t(h,h+(c[F]|0)),r.push(h);c=D(r);y=c.ranges();for(m=0;m<y.length;++m)r=y[m],b(g,r.min()+1,r.max(),u);if(z>A&&(m="+"==
u.orientation?new t(A,z+3):new t(A-3,z),m=f(c,m))){u.type="translation";A=m.ranges();for(c=z=0;A[0].min()>y[c].max();)c++;for(m=0;m<A.length;++m)y=m,"-"==u.orientation&&(y=A.length-m-1),r=A[y],u.readframe=z,q&&(y=parseInt(q[y+c]),"number"===typeof y&&0<=y&&2>=y&&(u.readframe=y,u.readframeExplicit=!0)),y=r.max()-r.min(),z=(z+y)%3,b(g,r.min()+1,r.max(),u)}}}else throw Error("Don't know what to do with "+this.bwg.type);};w.prototype.getFirstAdjacent=function(g,b,a,d){g=this.bwg.chromsToIDs[g];if(void 0===
g)return d([]);this.getFirstAdjacentById(g,b,a,d)};w.prototype.getFirstAdjacentById=function(g,b,a,d){var e=this;if(this.cirHeader){var p=null,q=-1,m=-1,r=0;Date.now();var n=function(a,d){r+=a.length;for(var m=4+32*e.cirBlockSize,p,n=0;n<a.length;++n){var g=new t(a[n],a[n]+m);p=p?D(p,g):g}m=p.ranges();for(p=0;p<m.length;++p)B(a,m[p],d)},B=function(m,n,q,B){n.max();n.min();e.bwg.data.slice(n.min(),n.max()-n.min()).fetch(function(B){for(var f=0;f<m.length;++f)if(n.contains(m[f])&&(u(B,m[f]-n.min(),
q),--r,0==r)){if(!p)return 0<a&&(0!=g||0<b)?e.getFirstAdjacentById(0,0,a,d):0>a&&(g!=e.bwg.maxID||1E9>b)?e.getFirstAdjacentById(e.bwg.maxID,1E9,a,d):d([]);e.fetchFeatures(function(d,e,m,p){return 0>a&&(d<g||m<b)||0<a&&(d>g||e>b)},[p],function(e){for(var m=null,p=-1,r=-1,n=0;n<e.length;++n){var g=e[n],b=g._chromId,u=g.min,q=g.max;if(null==m||0>a&&(b>p||q>r)||0<a&&(b<p||u<r))m=g,r=0>a?q:u,p=b}return null!=m?d([m]):d([])})}})},u=function(d,r,u){var B=new Uint8Array(d),f=new Int16Array(d);d=new Int32Array(d);
var y=B[r],f=f[r/2+1];r+=4;if(0!=y)for(y=0;y<f;++y){var l=r/4,C=d[l],t=d[l+1],v=d[l+2],h=d[l+3],l=c(B,r+16);u=c(B,r+24);(0>a&&(C<g||C==g&&t<=b)||0<a&&(v>g||v==g&&h>=b))&&!/_random/.exec(e.bwg.idsToChroms[C])&&(null==p||0>a&&(v>q||v==q&&h>m)||0<a&&(C<q||C==q&&t<m))&&(p={offset:l,size:u},m=0>a?h:t,q=0>a?v:C);r+=32}else{for(var H=B=-1,y=0;y<f;++y){l=r/4;C=d[l];t=d[l+1];v=d[l+2];h=d[l+3];l=d[l+4]<<32|d[l+5];if(0>a&&(C<g||C==g&&t<=b)&&v>=g||0<a&&(v>g||v==g&&h>=b)&&C<=g)if(0>B||h>H)B=l,H=0>a?h:t;r+=24}0<=
B&&n([B],u+1)}};n([e.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(m){e.cirHeader=m;m=new Int32Array(e.cirHeader);e.cirBlockSize=m[1];e.getFirstAdjacentById(g,b,a,d)})};h.prototype.readWigData=function(g,b,a,d){this.getUnzoomedView().readWigData(g,b,a,d)};h.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var g=4E3;this.zoomLevels[0]&&(g=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset);this.unzoomedView=new w(this,this.unzoomedIndexOffset,g,
!1)}return this.unzoomedView};h.prototype.getZoomedView=function(g){g=this.zoomLevels[g];g.view||(g.view=new w(this,g.indexOffset,4E3,!0));return g.view};h.prototype._tsFetch=function(g,b,a,d,e){var p=this;if(g>=this.zoomLevels.length-1){if(this.topLevelReductionCache){for(var q=[],m=this.topLevelReductionCache,r=0;r<m.length;++r)m[r]._chromId==b&&q.push(m[r]);return e(q)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3E8,function(m){p.topLevelReductionCache=m;return p._tsFetch(g,
b,a,d,e)})}else return(0>g?this.getUnzoomedView():this.getZoomedView(g)).readWigDataById(b,a,d,e)};h.prototype.thresholdSearch=function(g,b,a,d,e){function p(){if(0==m.length)return e(null);m.sort(function(d,e){var m=d.zoom-e.zoom;if(0!=m)return m;m=d.chrOrd-e.chrOrd;return 0!=m?m:d.min-e.min*a});var r=m.splice(0,1)[0];q._tsFetch(r.zoom,r.chr,r.min,r.max,function(n){var g=0<a?0:3E8;r.fromRef&&(g=b);for(var q=0;q<n.length;++q){var f=n[q],l;l=void 0!=f.maxScore?f.maxScore:f.score;if(0<a){if(l>d)if(0>
r.zoom){if(f.min>g)return e(f)}else f.max>g&&m.push({chr:r.chr,chrOrd:r.chrOrd,zoom:r.zoom-2,min:f.min,max:f.max,fromRef:r.fromRef})}else if(l>d)if(0>r.zoom){if(f.max<g)return e(f)}else f.min<g&&m.push({chr:r.chr,chrOrd:r.chrOrd,zoom:r.zoom-2,min:f.min,max:f.max,fromRef:r.fromRef})}p()})}a=0>a?-1:1;var q=this;g=this.chromsToIDs[g];for(var m=[{chrOrd:0,chr:g,zoom:q.zoomLevels.length-4,min:0,max:3E8,fromRef:!0}],r=1;r<=this.maxID+1;++r){var n=(g+a*r)%(this.maxID+1);0>n&&(n+=this.maxID+1);m.push({chrOrd:r,
chr:n,zoom:q.zoomLevels.length-1,min:0,max:3E8})}p()};h.prototype.getAutoSQL=function(g){if(!this.asOffset)return g(null);this.data.slice(this.asOffset,2048).fetch(function(b){var a=new Uint8Array(b);b="";for(var d=0;d<a.length&&0!=a[d];++d)b+=String.fromCharCode(a[d]);var a=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,e=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(b);if(e){d={declType:e[1],name:e[2],comment:e[4],fields:[]};b=b.substring(e[0]);for(e=a.exec(b);null!=e;e=a.exec(b))d.fields.push({type:e[1],
name:e[2],comment:e[4]});return g(d)}})};h.prototype.getExtraIndices=function(b){var f=this;if(4>this.version||0==this.extHeaderOffset||"bigbed"!=this.type)return b(null);this.data.slice(this.extHeaderOffset,64).fetch(function(a){if(!a)return b(null,"Couldn't fetch extension header");var d=new Uint8Array(a),e=new Int16Array(a);new Int32Array(a);var p=e[1];a=c(d,4);if(0==p)return b(null);f.data.slice(a,20*p).fetch(function(a){if(!a)return b(null,"Couldn't fetch index info");var d=new Uint8Array(a),
e=new Int16Array(a);new Int32Array(a);a=[];for(var n=0;n<p;++n){var B=e[10*n],u=e[10*n+1],l=c(d,20*n+4),B=new v(f,B,u,l,e[10*n+8]);a.push(B)}b(a)})})};v.prototype.lookup=function(b,f){var a=this;this.bbi.data.slice(this.offset,32).fetch(function(d){function e(d){a.bbi.data.slice(d,4+q*(m+r)).fetch(function(d){var p=new Uint8Array(d),n=new Uint16Array(d);new Uint32Array(d);n=n[1];d=4;if(0==p[0]){for(var q=null,l=0;l<n;++l){for(var y="",C=0;C<m;++C){var t=p[d++];0!=t&&(y+=String.fromCharCode(t))}C=
c(p,d);d+=8;if(0>b.localeCompare(y)&&q){e(q);return}q=C}e(q)}else{for(l=0;l<n;++l){y="";for(C=0;C<m;++C)t=p[d++],0!=t&&(y+=String.fromCharCode(t));if(y==b)return n=c(p,d),p=J(p,d+8),a.bbi.getUnzoomedView().fetchFeatures(function(d,e,m,p){if(p&&p.length>a.field-3)return p[a.field-3]==b},[{offset:n,size:p}],f);d+=r}return f([])}})}var p=new Uint8Array(d);new Int16Array(d);d=new Int32Array(d);var q=d[1],m=d[2],r=d[3];c(p,16);e(a.offset+32)})};"undefined"!==typeof E&&(E.exports={makeBwg:I,BIG_BED_MAGIC:2273964779,
BIG_WIG_MAGIC:2291137574})},{"./bin":3,"./das":5,"./spans":10,"./utils":11,jszlib:24}],3:[function(k,E,x){function c(b){this.blob=b}function h(b,f,g,l){l||("object"===typeof f?(l=f,f=void 0):l={});this.url=b;this.start=f||0;g&&(this.end=g);this.opts=l}function w(b){if(!b)return null;for(var f=new Uint8Array(b.length),g=0;g<f.length;++g)f[g]=b.charCodeAt(g);return f.buffer}function I(b,f){return b[f+7]<<24|b[f+6]<<16|b[f+5]<<8|b[f+4]}function v(b,f){return b[f+3]<<24|b[f+2]<<16|b[f+1]<<8|b[f]}function t(b,
f){return b[f+1]<<8|b[f]}function D(b,f){return b[f]}function f(b,f){return b[f]<<24|b[f+1]<<16|b[f+2]<<8|b[f+3]}if("undefined"!==typeof k)var b=k("./utils").shallowCopy,l=k("./sha1").b64_sha1,H=k("es6-promise").Promise;c.prototype.slice=function(b,f){var g;g=this.blob.slice?f?this.blob.slice(b,b+f):this.blob.slice(b):f?this.blob.webkitSlice(b,b+f):this.blob.webkitSlice(b);return new c(g)};c.prototype.salted=function(){return this};c.prototype.fetch="undefined"!==typeof FileReader?function(b){var f=
new FileReader;f.onloadend=function(g){b(w(f.result))};f.readAsBinaryString(this.blob)}:function(b){var f=new FileReaderSync;try{var g=f.readAsArrayBuffer(this.blob);b(g)}catch(l){b(null,l)}};h.prototype.slice=function(b,f){if(0>b)throw"Bad slice "+b;var g=this.start,l=this.end,g=g&&b?g+b:b||g;return new h(this.url,g,f&&g?g+f-1:l||f-1,this.opts)};var J=0,K=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");h.prototype.fetchAsText=function(b){var f=this;this.getURL().then(function(g){try{var c=
new XMLHttpRequest;(K||f.opts.salt)&&0>g.indexOf("?")&&(g=g+"?salt="+l(""+Date.now()+","+ ++J));c.open("GET",g,!0);if(f.end){if(1E8<f.end-f.start)throw"Monster fetch!";c.setRequestHeader("Range","bytes="+f.start+"-"+f.end)}c.onreadystatechange=function(){if(4==c.readyState)return 200==c.status||206==c.status?b(c.responseText):b(null)};f.opts.credentials&&(c.withCredentials=!0);c.send("")}catch(a){return b(null)}}).catch(function(g){console.log(g);return b(null,g)})};h.prototype.salted=function(){var f=
b(this.opts);f.salt=!0;return new h(this.url,this.start,this.end,f)};h.prototype.getURL=function(){return this.opts.resolver?this.opts.resolver(this.url).then(function(b){return"string"===typeof b?b:b.url}):H.resolve(this.url)};h.prototype.fetch=function(b,f){var g=this;f=f||{};var c=f.attempt||1,a=f.truncatedLength;if(3<c)return b(null);this.getURL().then(function(d){try{var e;f.timeout&&!g.opts.credentials&&(e=setTimeout(function(){console.log("timing out "+d);p.abort();return b(null,"Timeout")},
f.timeout));var p=new XMLHttpRequest,q;(K||g.opts.salt)&&0>d.indexOf("?")&&(d=d+"?salt="+l(""+Date.now()+","+ ++J));p.open("GET",d,!0);p.overrideMimeType("text/plain; charset=x-user-defined");if(g.end){if(1E8<g.end-g.start)throw"Monster fetch!";p.setRequestHeader("Range","bytes="+g.start+"-"+g.end);q=g.end-g.start+1}p.responseType="arraybuffer";p.onreadystatechange=function(){if(4==p.readyState){e&&clearTimeout(e);if(200==p.status||206==p.status){if(p.response){var d=p.response.byteLength;return!q||
q==d||a&&d==a?b(p.response):g.fetch(b,{attempt:c+1,truncatedLength:d})}if(p.mozResponseArrayBuffer)return b(p.mozResponseArrayBuffer);d=p.responseText;return!q||q==d.length||a&&d.length==a?b(w(p.responseText)):g.fetch(b,{attempt:c+1,truncatedLength:d.length})}return g.fetch(b,{attempt:c+1})}};g.opts.credentials&&(p.withCredentials=!0);p.send("")}catch(m){return b(null)}}).catch(function(a){console.log(a);return b(null,a)})};(function(b){var f=new ArrayBuffer(8),g=new Uint8Array(f),l=new Float32Array(f);
b.readFloat=function(a,d){g[0]=a[d];g[1]=a[d+1];g[2]=a[d+2];g[3]=a[d+3];return l[0]}})(this);"undefined"!==typeof E&&(E.exports={BlobFetchable:c,URLFetchable:h,readInt:v,readIntBE:f,readInt64:I,readShort:t,readByte:D,readFloat:this.readFloat})},{"./sha1":9,"./utils":11,"es6-promise":12}],4:[function(k,E,x){function c(b,f,c,t){this.red=b|0;this.green=f|0;this.blue=c|0;t&&(this.name=t)}function h(b){b="00"+b.toString(16);return b.substring(b.length-2)}function w(b){var l=t[b];l||((l=D.exec(b))?l=new c("0x"+
l[1]|0,"0x"+l[2]|0,"0x"+l[3]|0,b):(l=f.exec(b))?l=new c(l[1]|0,l[2]|0,l[3]|0,b):(console.log("couldn't handle color: "+b),l=t.black),t[b]=l);return l}function I(b,f,t){for(var v=[],h=0;h<t.length;++h)v.push(w(t[h]));t=[];h=0;a:for(;h<b;++h){for(var y=f[0]+1*h/(b-1)*(f[f.length-1]-f[0]),C=0;C<f.length-1;++C)if(y>=f[C]&&y<=f[C+1]){var y=(y-f[C])/(f[C+1]-f[C]),g=v[C],C=v[C+1],C=(new c(g.red*(1-y)+C.red*y|0,g.green*(1-y)+C.green*y|0,g.blue*(1-y)+C.blue*y|0)).toSvgString();t.push(C);continue a}throw"Bad step";
}return t}function v(b,f,c,t){return t?I(b,[0,.5,1],[f,c,t]):I(b,[0,1],[f,c])}c.prototype.toSvgString=function(){this.name||(this.name="rgb("+this.red+","+this.green+","+this.blue+")");return this.name};c.prototype.toHexString=function(){return"#"+h(this.red)+h(this.green)+h(this.blue)};var t={red:new c(255,0,0,"red"),green:new c(0,255,0,"green"),blue:new c(0,0,255,"blue"),yellow:new c(255,255,0,"yellow"),white:new c(255,255,255,"white"),black:new c(0,0,0,"black"),gray:new c(180,180,180,"gray"),grey:new c(180,
180,180,"grey"),lightskyblue:new c(135,206,250,"lightskyblue"),lightsalmon:new c(255,160,122,"lightsalmon"),hotpink:new c(255,105,180,"hotpink")},D=/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/,f=/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;"undefined"!==typeof E&&(E.exports={makeColourSteps:I,makeGradient:v,dasColourForName:w})},{}],5:[function(k,E,x){function c(a,d,e,b){this.name=a;this.start=d;this.end=e;this.description=b}function h(a,d){var e;"string"==typeof a?(this.uri=a,e=d||{}):e=a||{};for(var b in e)this[b]=
e[b];this.coords||(this.coords=[]);this.props||(this.props={});(this.dasBaseURI=this.uri)&&"/"!=this.dasBaseURI.substr(this.uri.length-1)&&(this.dasBaseURI+="/")}function w(){}function I(a,d){return a.taxon==d.taxon&&a.auth==d.auth&&a.version==d.version}function v(a,d,e,b,p){this.name=a;this.start=d;this.end=e;this.alphabet=b;this.seq=p}function t(){}function D(a){a&&(this.id=a)}function f(a,d){this.desc=a;this.uri=d}function b(a){this.type=a;this.objects={};this.blocks=[]}function l(){this.styles=
[]}function H(){}function J(a,d){d=d||{};this.uri=a;this.opts=d}function K(a,d){var e=a.getElementsByTagName(d);if(0<e.length&&e[0].firstChild){e=e[0];if(1==e.childNodes.length)return e.firstChild.nodeValue;for(var b="",p=0;p<e.childNodes.length;++p)b+=e.childNodes[p].nodeValue;return b}return null}function y(a){for(var d=[],e=a.getElementsByTagName("LINK"),b=0;b<e.length;++b){var p=e[b];p.parentNode==a&&d.push(new f(p.firstChild?p.firstChild.nodeValue:"Unknown",p.getAttribute("href")))}return d}
function C(a){var d=[];a=a.getElementsByTagName("NOTE");for(var e=0;e<a.length;++e)a[e].firstChild&&d.push(a[e].firstChild.nodeValue);return d}function g(a,d,e,b){if(window.XDomainRequest){var p=new XDomainRequest;p.onload=function(){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;a.loadXML(p.responseText);d(a)};p.open("get",a);p.send("")}else try{var p=new XMLHttpRequest,f=setTimeout(function(){console.log("timing out "+a);p.abort();d(null,p)},5E3);p.timeout=5E3;p.ontimeout=function(){console.log("timeout on "+
a)};p.onreadystatechange=function(){4==p.readyState&&(clearTimeout(f),(200<=p.status||0==p.status)&&d(p.responseXML,p))};p.open("get",a,!0);e&&(p.withCredentials=!0);b&&p.setRequestHeader("X-DAS-Authorisation",b);p.overrideMimeType("text/xml");p.setRequestHeader("Accept","application/xml,*/*");p.send("")}catch(g){d(null,p,g)}}function M(a){a=(""+a).toLowerCase();return"yes"===a||"true"===a}function a(a){if(!a)return!1;a=(""+a).toLowerCase();return"no"!==a||"false"!==a}function d(a){var d=e(a);d.styles=
[];for(var b=0;b<a.styles.length;++b){var p=d.styles[b]=e(a.styles[b]);p._methodRE=p._labelRE=p._typeRE=void 0;p.style=e(p.style);p.style.id=void 0;p.style._gradient=void 0}return d}if("undefined"!==typeof k){x=k("./utils");var e=x.shallowCopy,p=x.pusho,q=k("./color").makeColourSteps}c.prototype.toString=function(){return this.name+":"+this.start+".."+this.end};c.prototype.isBounded=function(){return this.start&&this.end};c.prototype.toDASQuery=function(){var a="segment="+this.name;this.start&&this.end&&
(a+=":"+this.start+","+this.end);return a};h.prototype.getURI=function(a){return this.resolver?this.resolver(a).then(function(a){return"string"===typeof a?a:a.url}):Promise.resolve(a)};h.prototype.entryPoints=function(a){this.doCrossDomainRequest(this.dasBaseURI+"entry_points",function(d){if(!d)return a([]);var e=[];d=d.getElementsByTagName("SEGMENT");for(var b=0;b<d.length;++b){var p=d[b],f=p.getAttribute("id"),g=p.getAttribute("size"),q;g?(q=1,g|=0):((q=p.getAttribute("start"))&&(q|=0),(g=p.getAttribute("stop"))&&
(g|=0));var l=null;p.firstChild&&(l=p.firstChild.nodeValue);e.push(new c(f,q,g,l))}a(e)})};h.prototype.sequence=function(a,d){var e=this.dasBaseURI+"sequence?"+a.toDASQuery();this.doCrossDomainRequest(e,function(a){if(a){var e=[];a=a.getElementsByTagName("SEQUENCE");for(var b=0;b<a.length;++b){var p=a[b],m=p.getAttribute("id"),f=p.getAttribute("start"),g=p.getAttribute("stop"),n=null;if(p.firstChild)for(var p=p.firstChild.nodeValue,n="",q=0;;){var l=p.indexOf("\n",q);if(0<=l)n+=p.substring(q,l).toUpperCase(),
q=l+1;else{n+=p.substring(q).toUpperCase();break}}e.push(new v(m,f,g,"DNA",n))}d(e)}else d([])})};h.prototype.features=function(a,d,e){d=d||{};var p;if(this.features_uri)p=this.features_uri;else{var b=[];if(a)b.push(a.toDASQuery());else if(d.group)if(a=d.group,"string"==typeof a)b.push("group_id="+a);else for(var f=0;f<a.length;++f)b.push("group_id="+a[f]);if(d.adjacent)for(a=d.adjacent,"string"==typeof a&&(a=[a]),f=0;f<a.length;++f)b.push("adjacent="+a[f]);if(d.type)if("string"==typeof d.type)b.push("type="+
d.type);else for(a=0;a<d.type.length;++a)b.push("type="+d.type[a]);d.maxbins&&b.push("maxbins="+d.maxbins);0<b.length?p=this.dasBaseURI+"features?"+b.join(";"):e([],"No filters specified")}this.doCrossDomainRequest(p,function(a,d){if(a){for(var b=[],p={},m=a.getElementsByTagName("SEGMENT"),f=0;f<m.length;++f){var g=m[f],r=g.getAttribute("id");p[r]={min:g.getAttribute("start"),max:g.getAttribute("stop")};for(var g=g.getElementsByTagName("FEATURE"),q=0;q<g.length;++q){var u=g[q],l=new t;l.segment=r;
l.id=u.getAttribute("id");l.label=u.getAttribute("label");var B=K(u,"START"),c=K(u,"END");(B|0)>(c|0)?(l.min=c|0,l.max=B|0):(l.min=B|0,l.max=c|0);B=u.getElementsByTagName("TYPE");0<B.length&&(B=B[0],B.firstChild&&(l.type=B.firstChild.nodeValue),l.typeId=B.getAttribute("id"),l.typeCv=B.getAttribute("cvId"));l.type=K(u,"TYPE");!l.type&&l.typeId&&(l.type=l.typeId);l.method=K(u,"METHOD");(B=K(u,"ORIENTATION"))||(B="0");l.orientation=B;l.score=K(u,"SCORE");l.links=y(u);l.notes=C(u);B=u.getElementsByTagName("GROUP");
for(c=0;c<B.length;++c){var A=B[c],v=new D;v.type=A.getAttribute("type");v.id=A.getAttribute("id");v.links=y(A);v.notes=C(A);l.groups?l.groups.push(v):l.groups=Array(v)}if(l.notes)for(B=0;B<l.notes.length;++B)c=l.notes[B],0==c.indexOf("Genename=")&&(A=new D,A.type="gene",A.id=c.substring(9),l.groups?l.groups.push(A):l.groups=Array(A));B=u.getElementsByTagName("PART");if(0<B.length){A=[];for(c=0;c<B.length;++c)A.push(B[c].getAttribute("id"));l.parts=A}B=u.getElementsByTagName("PARENT");if(0<B.length){u=
[];for(c=0;c<B.length;++c)u.push(B[c].getAttribute("id"));l.parents=u}b.push(l)}}e(b,void 0,p)}else e([],"Failed request: "+(0==d.status?"server may not support CORS":"status="+d.status))},function(a){e([],a)})};h.prototype.alignments=function(a,d,e){var p=this.dasBaseURI+"alignment?query="+a;this.doCrossDomainRequest(p,function(a){if(a){var d=[];a=a.getElementsByTagName("alignment");for(var m=0;m<a.length;++m){for(var f=a[m],g=new b(f.getAttribute("alignType")),r=f.getElementsByTagName("alignObject"),
q=0;q<r.length;++q){var l=r[q],l={id:l.getAttribute("intObjectId"),accession:l.getAttribute("dbAccessionId"),version:l.getAttribute("objectVersion"),dbSource:l.getAttribute("dbSource"),dbVersion:l.getAttribute("dbVersion")};g.objects[l.id]=l}f=f.getElementsByTagName("block");for(r=0;r<f.length;++r){for(var l=f[r],q={order:l.getAttribute("blockOrder"),segments:[]},l=l.getElementsByTagName("segment"),c=0;c<l.length;++c){var t=l[c],t={object:t.getAttribute("intObjectId"),min:t.getAttribute("start"),
max:t.getAttribute("end"),strand:t.getAttribute("strand"),cigar:K(t,"cigar")};q.segments.push(t)}g.blocks.push(q)}d.push(g)}e(d)}else e([],"Failed request "+p)})};l.prototype.pushStyle=function(a,d,p){a||(a={type:"default"});a=e(a);d&&(a.zoom=d);a.style=p;this.styles.push(a)};h.prototype.stylesheet=function(a,d){var e,p=this.credentials;this.stylesheet_uri?(e=this.stylesheet_uri,p=!1):e=this.dasBaseURI+"stylesheet";this.getURI(e).then(function(e){g(e,function(e){if(e){var p=new l;e=e.getElementsByTagName("TYPE");
for(var b=0;b<e.length;++b){var f=e[b],g={};g.type=f.getAttribute("id");g.label=f.getAttribute("label");g.method=f.getAttribute("method");for(var f=f.getElementsByTagName("GLYPH"),n=0;n<f.length;++n){var u=f[n],B=u.getAttribute("zoom"),c;a:{if(u.hasChildNodes()){u=u.firstChild;do{if(u.nodeType==Node.ELEMENT_NODE){c=u;break a}u=u.nextSibling}while(null!=u)}c=null}u=new H;u.glyph=c.localName;for(c=c.firstChild;c;){if(c.nodeType==Node.ELEMENT_NODE)if("BGGRAD"==c.localName){var t=u,v=c.localName,h,C=
c;h=(h=C.getAttribute("steps"))?h|0:50;for(var y=[],k=[],C=C.getElementsByTagName("STOP"),D=0;D<C.length;++D){var J=C[D];y.push(1*J.getAttribute("score"));k.push(J.firstChild.nodeValue)}h=q(h,y,k);t[v]=h}else u[c.localName]=c.firstChild.nodeValue;c=c.nextSibling}p.pushStyle(g,B,u)}}a(p)}else d&&d()},p)}).catch(function(a){console.log(a);d()})};J.prototype.sources=function(a,d,e){e||(e={});var b=[];e.taxon&&b.push("organism="+e.taxon);e.auth&&b.push("authority="+e.auth);e.version&&b.push("version="+
e.version);e=this.uri;0<b.length&&(e=e+"?"+b.join("&"));g(e,function(e){if(!e&&d)d();else{var b=[];e=e.getElementsByTagName("SOURCE");for(var f=0;f<e.length;++f){var g=e[f],n=g.getElementsByTagName("VERSION");if(!(1>n.length)){for(var q=n[0],l=q.getElementsByTagName("COORDINATES"),n=[],B=0;B<l.length;++B){var c=l[B],t=new w;t.auth=c.getAttribute("authority");t.taxon=c.getAttribute("taxid");t.version=c.getAttribute("version");n.push(t)}for(var l=[],c=q.getElementsByTagName("CAPABILITY"),v,B=0;B<c.length;++B)t=
c[B],l.push(t.getAttribute("type")),"das1:features"==t.getAttribute("type")&&(v=t.getAttribute("query_uri"),v=v.substring(0,v.length-8));B={};q=q.getElementsByTagName("PROP");for(c=0;c<q.length;++c)p(B,q[c].getAttribute("name"),q[c].getAttribute("value"));v&&(g=new h(v,{source_uri:g.getAttribute("uri"),name:g.getAttribute("title"),desc:g.getAttribute("description"),coords:n,props:B,capabilities:l}),b.push(g))}}a(b)}})};h.prototype.doCrossDomainRequest=function(a,d,e){var b;this.xUser&&(b="Basic "+
btoa(this.xUser+":"+this.xPass));try{return g(a,d,this.credentials,b)}catch(p){if(e)e(p);else throw p;}};"undefined"!==typeof E&&(E.exports={DASGroup:D,DASFeature:t,DASStylesheet:l,DASStyle:H,DASSource:h,DASSegment:c,DASRegistry:J,DASSequence:v,DASLink:f,isDasBooleanTrue:M,isDasBooleanNotFalse:a,copyStylesheet:d,coordsMatch:I})},{"./color":4,"./utils":11}],6:[function(k,E,x){function c(c,t){0>c.indexOf("?")&&(c+="?soft=true");return new I(function(h,f){var b=new XMLHttpRequest;b.onreadystatechange=
function(){if(4==b.readyState)if(300<=b.status)f("Error code "+b.status);else{var l=JSON.parse(b.response);h(t?l:l.location)}};b.open("GET",c,!0);b.setRequestHeader("Accept","application/json");b.responseType="text";b.send("")})}function h(c){this.rawurl=c}function w(c,t,k,f){f||("object"===typeof t?(f=t,t=void 0):f={});this.url="string"===typeof c?new h(c):c;this.start=t||0;k&&(this.end=k);this.opts=f}if("undefined"!==typeof k)var I=k("es6-promise").Promise;h.prototype.getURLPromise=function(){this.urlPromise&&
this.urlPromiseValidity>Date.now()||(this.urlPromise=c(this.rawurl,!0).then(function(c){return c.location}),this.urlPromiseValidity=Date.now()+432E5);return this.urlPromise};w.prototype.slice=function(c,t){if(0>c)throw"Bad slice "+c;var h=this.start,f=this.end,h=h&&c?h+c:c||h;return new w(this.url,h,t&&h?h+t-1:f||t-1,this.opts)};w.prototype.fetchAsText=function(c){var t=this,h=new XMLHttpRequest;t.url.getURLPromise().then(function(f){h.open("GET",f,!0);if(t.end){if(1E8<t.end-t.start)throw"Monster fetch!";
h.setRequestHeader("Range","bytes="+t.start+"-"+t.end)}h.onreadystatechange=function(){if(4==h.readyState)return 200==h.status||206==h.status?c(h.responseText):c(null)};t.opts.credentials&&(h.withCredentials=!0);h.send("")}).catch(function(f){console.log(f);return c(null)})};w.prototype.salted=function(){return this};w.prototype.fetch=function(c,t,h){var f=this;t=t||1;if(3<t)return c(null);f.url.getURLPromise().then(function(b){var l=new XMLHttpRequest,k;l.open("GET",b,!0);l.overrideMimeType("text/plain; charset=x-user-defined");
if(f.end){if(1E8<f.end-f.start)throw"Monster fetch!";l.setRequestHeader("Range","bytes="+f.start+"-"+f.end);k=f.end-f.start+1}l.responseType="arraybuffer";l.onreadystatechange=function(){if(4==l.readyState){if(200==l.status||206==l.status){if(l.response){var b=l.response.byteLength;return!k||k==b||h&&b==h?c(l.response):f.fetch(c,t+1,b)}if(l.mozResponseArrayBuffer)return c(l.mozResponseArrayBuffer);b=l.responseText;if(!k||k==b.length||h&&b.length==h){if(b=l.responseText){for(var w=new Uint8Array(b.length),
y=0;y<w.length;++y)w[y]=b.charCodeAt(y);b=w.buffer}else b=null;return c(b)}return f.fetch(c,t+1,b.length)}return f.fetch(c,t+1)}};f.opts.credentials&&(l.withCredentials=!0);l.send("")}).catch(function(b){console.log(b)})};"undefined"!==typeof E&&(E.exports={lookupEncodeURI:c,EncodeFetchable:w})},{"es6-promise":12}],7:[function(k,E,x){(function(c){function h(b){this.bam=b}function w(b){this.bbi=b}function x(b){return function(f){var g=newID();return new l(function(l,a){J[g]={resolve:l,reject:a};postMessage({tag:g,
cmd:"resolve",resolver:b,url:f})})}}var v=k("./bin"),t=k("./bam"),D=k("./bigwig"),f=k("./encode"),b=k("./utils"),l=k("es6-promise").Promise,H={},J={},E=0;c.newID=function(){return"cn"+ ++E};postMessage({tag:"init"});self.onmessage=function(l){var c=l.data,g=l.data.command,k=l.data.tag;if(g)if("connectBAM"===g){var a=newID(),d;c.resolver&&(d=x(c.resolver));var e;c.blob?(l=new v.BlobFetchable(c.blob),d=new v.BlobFetchable(c.indexBlob)):(l=new v.URLFetchable(c.uri,{credentials:c.credentials,resolver:d}),
d=new v.URLFetchable(c.indexUri,{credentials:c.credentials,resolver:d}),e=c.indexChunks);t.makeBam(l,d,e,function(d,e){d?(H[a]=new h(d),postMessage({tag:k,result:a})):postMessage({tag:k,error:e||"Couldn't fetch BAM"})})}else if("connectBBI"===g)a=newID(),c.resolver&&(d=x(c.resolver)),e=c.blob?new v.BlobFetchable(c.blob):"encode"==c.transport?new f.EncodeFetchable(c.uri,{credentials:c.credentials}):new v.URLFetchable(c.uri,{credentials:c.credentials,resolver:d}),D.makeBwg(e,function(d,e){d?(H[a]=new w(d),
postMessage({tag:k,result:a})):postMessage({tag:k,error:e||"Couldn't fetch BBI"})},c.uri);else if("textxhr"===g)b.textXHR(c.uri,function(a,d){a?postMessage({tag:k,result:a}):postMessage({tag:k,err:d||"Couldn't fetch resource"})});else if("fetch"===g){e=H[l.data.connection];if(!e)return postMessage({tag:k,error:"No such connection: "+l.data.connection});e.fetch(c.tag,c.chr,c.min,c.max,c.zoom,c.opts)}else if("leap"===g){e=H[l.data.connection];if(!e)return postMessage({tag:k,error:"No such connection: "+
l.data.connection});e.leap(c.tag,c.chr,c.pos,c.dir)}else if("quantLeap"===g){e=H[l.data.connection];if(!e)return postMessage({tag:k,error:"No such connection: "+l.data.connection});e.quantLeap(c.tag,c.chr,c.pos,c.dir,c.threshold,c.under)}else if("meta"===g){e=H[l.data.connection];if(!e)return postMessage({tag:k,error:"No such connection: "+l.data.connection});e.meta(c.tag)}else if("search"===g){e=H[l.data.connection];if(!e)return postMessage({tag:k,error:"No such connection: "+l.data.connection});
e.search(c.tag,c.query,c.index)}else{if("date"===g)return postMessage({tag:k,result:Date.now()|0});postMessage({tag:k,error:"Bad command "+g})}else if(e=J[k])c.err?e.reject(c.err):e.resolve(c.url),delete J[k]};h.prototype.fetch=function(b,f,g,c,a,d){d=d||{};this.bam.fetch(f,g,c,function(a,d){a?postMessage({tag:b,result:a,time:Date.now()|0}):postMessage({tag:b,error:d})},d)};w.prototype.fetch=function(b,f,g,c,a){"number"!==typeof a&&(a=-1);(0>a?this.bbi.getUnzoomedView():this.bbi.getZoomedView(a)).readWigData(f,
g,c,function(a){postMessage({tag:b,result:a})})};w.prototype.meta=function(b){for(var f=[1],g=0;g<this.bbi.zoomLevels.length;++g)f.push(this.bbi.zoomLevels[g].reduction);var c=this,a={type:this.bbi.type,zoomLevels:f,fieldCount:this.bbi.fieldCount,definedFieldCount:this.bbi.definedFieldCount,schema:this.bbi.schema};"bigbed"===this.bbi.type?this.bbi.getExtraIndices(function(d){d&&(c.extraIndices=d,a.extraIndices=d.map(function(a){return a.field}));postMessage({tag:b,result:a})}):postMessage({tag:b,
result:a})};w.prototype.leap=function(b,f,g,c){this.bbi.getUnzoomedView().getFirstAdjacent(f,g,c,function(a,d){postMessage({tag:b,result:a,error:d})})};w.prototype.quantLeap=function(b,f,g,c,a,d){this.bbi.thresholdSearch(f,g,c,a,function(a,d){postMessage({tag:b,result:a,error:d})})};w.prototype.search=function(b,f,g){this.extraIndices[0].lookup(f,function(f,a){postMessage({tag:b,result:f,error:a})})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bam":1,"./bigwig":2,
"./bin":3,"./encode":6,"./utils":11,"es6-promise":12}],8:[function(k,E,x){function c(b,f){this.block=b;this.offset=f}function h(b,f,t){var h=4294967296*(b[f+6]&255)+16777216*(b[f+5]&255)+65536*(b[f+4]&255)+256*(b[f+3]&255)+(b[f+2]&255);b=b[f+1]<<8|b[f];return 0!=h||0!=b||t?new c(h,b):null}function w(b,c){c=Math.min(c||1,b.byteLength-50);for(var t=[],h=[0],k=0;h[0]<c;){var v=new Uint8Array(b,h[0],12),v=v[11]<<8|v[10],v=D(b,12+v+h[0],Math.min(65536,b.byteLength-12-v-h[0]),h);h[0]+=8;k+=v.byteLength;
t.push(v)}if(1==t.length)return t[0];h=new Uint8Array(k);for(v=k=0;v<t.length;++v){var w=new Uint8Array(t[v]);f(w,0,h,k,w.length);k+=w.length}return h.buffer}function I(b,f){this.minv=b;this.maxv=f}function v(b,f){--f;return b>>14==f>>14?4681+(b>>14):b>>17==f>>17?585+(b>>17):b>>20==f>>20?73+(b>>20):b>>23==f>>23?9+(b>>23):b>>26==f>>26?1+(b>>26):0}function t(b,f){var c,t=[];--f;t.push(0);for(c=1+(b>>26);c<=1+(f>>26);++c)t.push(c);for(c=9+(b>>23);c<=9+(f>>23);++c)t.push(c);for(c=73+(b>>20);c<=73+(f>>
20);++c)t.push(c);for(c=585+(b>>17);c<=585+(f>>17);++c)t.push(c);for(c=4681+(b>>14);c<=4681+(f>>14);++c)t.push(c);return t}if("undefined"!==typeof k){k=k("jszlib");var D=k.inflateBuffer,f=k.arrayCopy}c.prototype.toString=function(){return""+this.block+":"+this.offset};"undefined"!==typeof E&&(E.exports={unbgzf:w,readVob:h,reg2bin:v,reg2bins:t,Chunk:I})},{jszlib:24}],9:[function(k,E,x){function c(c){c=w(I(c));for(var h="",f,b=0;b<c.length;b++)f=c.charCodeAt(b),h+="0123456789abcdef".charAt(f>>>4&15)+
"0123456789abcdef".charAt(f&15);return h}function h(c){c=w(I(c));for(var h="",f=c.length,b=0;b<f;b+=3)for(var l=c.charCodeAt(b)<<16|(b+1<f?c.charCodeAt(b+1)<<8:0)|(b+2<f?c.charCodeAt(b+2):0),k=0;4>k;k++)h=8*b+6*k>8*c.length?h+"":h+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l>>>6*(3-k)&63);return h}function w(c){for(var h=Array(c.length>>2),f=0;f<h.length;f++)h[f]=0;for(f=0;f<8*c.length;f+=8)h[f>>5]|=(c.charCodeAt(f/8)&255)<<24-f%32;c=8*c.length;h[c>>5]|=128<<24-c%32;
h[(c+64>>9<<4)+15]=c;c=Array(80);for(var f=1732584193,b=-271733879,l=-1732584194,k=271733878,w=-1009589776,x=0;x<h.length;x+=16){for(var y=f,C=b,g=l,E=k,a=w,d=0;80>d;d++){if(16>d)c[d]=h[x+d];else{var e=c[d-3]^c[d-8]^c[d-14]^c[d-16];c[d]=e<<1|e>>>31}var e=f<<5|f>>>27,p;p=20>d?b&l|~b&k:40>d?b^l^k:60>d?b&l|b&k|l&k:b^l^k;e=v(v(e,p),v(v(w,c[d]),20>d?1518500249:40>d?1859775393:60>d?-1894007588:-899497514));w=k;k=l;l=b<<30|b>>>2;b=f;f=e}f=v(f,y);b=v(b,C);l=v(l,g);k=v(k,E);w=v(w,a)}h=[f,b,l,k,w];c="";for(f=
0;f<32*h.length;f+=8)c+=String.fromCharCode(h[f>>5]>>>24-f%32&255);return c}function I(c){for(var h="",f=-1,b,l;++f<c.length;)b=c.charCodeAt(f),l=f+1<c.length?c.charCodeAt(f+1):0,55296<=b&&56319>=b&&56320<=l&&57343>=l&&(b=65536+((b&1023)<<10)+(l&1023),f++),127>=b?h+=String.fromCharCode(b):2047>=b?h+=String.fromCharCode(192|b>>>6&31,128|b&63):65535>=b?h+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|b&63):2097151>=b&&(h+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|b&63));return h}
function v(c,h){var f=(c&65535)+(h&65535);return(c>>16)+(h>>16)+(f>>16)<<16|f&65535}"undefined"!==typeof E&&(E.exports={b64_sha1:h,hex_sha1:c})},{}],10:[function(k,E,x){function c(f,b){if("number"!=typeof f||"number"!=typeof b)throw"Bad range "+f+","+b;this._min=f;this._max=b}function h(f){f=f.sort(D);var b=[],c=f.shift();f.forEach(function(f){f._min<=c._max?f._max>c._max&&(c._max=f._max):(b.push(c),c=f)});b.push(c);this._ranges=b}function w(f,b){f instanceof h||(f instanceof Array||(f=[f]),f=new h(f));
b&&f.insertRange(b);return f}function I(f,b){for(var l=f.ranges(),k=b.ranges(),t=l.length,v=k.length,w=0,C=0,g=[];w<t&&C<v;){f=l[w];b=k[C];var x=Math.max(f.min(),b.min()),a=Math.min(f.max(),b.max());a>=x&&g.push(new c(x,a));f.max()>b.max()?++C:++w}return 0==g.length?null:1==g.length?g[0]:new h(g)}function v(f){var b=0;f=f.ranges();for(var c=0;c<f.length;++c)var h=f[c],b=b+(h.max()-h.min()+1);return b}function t(f,b){return f.min()<b.min()?-1:f.min()>b.min()?1:f.max()<b.max()?-1:b.max()>f.max()?1:
0}function D(f,b){return f._min<b._min?-1:f._min>b._min?1:f._max<b._max?-1:b._max>f._max?1:0}c.prototype.min=function(){return this._min};c.prototype.max=function(){return this._max};c.prototype.contains=function(f){return f>=this._min&&f<=this._max};c.prototype.isContiguous=function(){return!0};c.prototype.ranges=function(){return[this]};c.prototype._pushRanges=function(f){f.push(this)};c.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"};h.prototype.min=function(){return this._ranges[0].min()};
h.prototype.max=function(){return this._ranges[this._ranges.length-1].max()};h.prototype.lower_bound=function(f){var b=this.ranges();if(f>this.max())return b.length;if(f<this.min())return 0;for(var c=0,h=b.length-1;c<=h;){var k=Math.floor((c+h)/2);if(f>b[k]._max)c=k+1;else if(f<b[k]._min)h=k-1;else return k}return c};h.prototype.contains=function(f){var b=this.lower_bound(f);return b<this._ranges.length&&this._ranges[b].contains(f)?!0:!1};h.prototype.insertRange=function(f){var b=this.lower_bound(f._min);
if(b===this._ranges.length)this._ranges.push(f);else{var c=this.ranges();if(f._max<c[b]._min)this._ranges.splice(b,0,f);else{c[b]._min<f._min&&(f._min=c[b]._min);for(var h=b+1;h<c.length&&c[h]._min<=f._max;)h++;h--;c[h]._max>f._max&&(f._max=c[h]._max);this._ranges.splice(b,h-b+1,f)}}};h.prototype.isContiguous=function(){return 1<this._ranges.length};h.prototype.ranges=function(){return this._ranges};h.prototype._pushRanges=function(f){for(var b=0;b<this._ranges.length;++b)f.push(this._ranges[b])};
h.prototype.toString=function(){for(var f="",b=0;b<this._ranges.length;++b)0<b&&(f+=","),f+=this._ranges[b].toString();return f};"undefined"!==typeof E&&(E.exports={Range:c,union:w,intersection:I,coverage:v,rangeOver:t,_rangeOrder:D})},{}],11:[function(k,E,x){function c(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function h(a,e,b){a[e]?a[e].push(b):a[e]=[b]}function w(a,e,b){var f=a[e];if(f){for(a=0;a<f.length;++a)if(f[a]==b)return;f.push(b)}else a[e]=[b]}function I(a,e,b,f){if(a)return a;
if(e)return e;if(b)return b;if(f)return f}function c(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function v(a,e){if(!a)return-1;for(var b=0;b<a.length;++b)if(a[b]===e)return b;return-1}function t(a,e,b,f){a=document.createElement(a);if(e){e instanceof Array||(e=[e]);for(var c=0;c<e.length;++c){var g=e[c];g&&("string"==typeof g?g=document.createTextNode(g):"number"==typeof g&&(g=document.createTextNode(""+g)),a.appendChild(g))}}if(b)for(var n in b)try{a[n]=b[n]}catch(h){throw console.log("error setting "+
n),h;}if(f)for(n in f)a.style[n]=f[n];return a}function D(a,e,b,f){a=document.createElementNS(a,e);if(b)for(b instanceof Array||(b=[b]),e=0;e<b.length;++e){var c=b[e];"string"==typeof c&&(c=document.createTextNode(c));a.appendChild(c)}if(f)for(var g in f){b=a;e=g;var c=f[g],n=M[e];if(!n){for(var n="",h=0;h<e.length;++h)var u=e.substring(h,h+1),l=u.toLowerCase(),n=l!=u?n+"-"+l:n+u;M[e]=n}b.setAttribute(n,c)}return a}function f(a){if(a&&a.childNodes)for(;0<a.childNodes.length;)a.removeChild(a.firstChild)}
function b(a,e){if("undefined"===typeof a)return"undefined";if(null==a)return"null";if("string"==typeof a)return"'"+a+"'";if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array){for(var f=null,c=0;c<a.length;++c)f=(null==f?"":f+", ")+b(a[c],e);return"["+(f?f:"")+"]"}e=e||{};f=null;for(c in a)e[c]||void 0!=c&&"function"!=typeof a[c]&&(f=(null==f?"":f+", ")+c+": "+b(a[c],e));return"{"+(f?f:"")+"}"}return typeof a}function l(a){var e={},b;for(b in a)e[b]=a[b];
return e}function H(a){this.value=a;this.listeners=[]}function J(){this.queue=[]}function K(d,e,b){b&&b.salt&&(d=d+"?salt="+g(""+Date.now()+","+ ++a));try{var f;b.timeout&&(f=setTimeout(function(){console.log("timing out "+d);c.abort();return e(null,"Timeout")},b.timeout));var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&(f&&clearTimeout(f),200>c.status||300<=c.status?e(null,"Error code "+c.status):e(c.responseText))};c.open("GET",d,!0);c.responseType="text";b&&b.credentials&&
(c.withCredentials=!0);c.send("")}catch(r){e(null,"Exception "+r)}}function y(a,e){if(0==e.indexOf("http:")||0==e.indexOf("https:"))return e;var b=a.lastIndexOf("/");return 0<=b?a.substr(0,b+1)+e:e}function C(a){return t("a",null,{href:a}).href}if("undefined"!==typeof k)var g=k("./sha1").b64_sha1;var M={};H.prototype.addListener=function(a){this.listeners.push(a)};H.prototype.addListenerAndFire=function(a){this.listeners.push(a);a(this.value)};H.prototype.removeListener=function(a){var e=this.listeners;
a=v(e,a);0<=a&&e.splice(a,1)};H.prototype.get=function(){return this.value};H.prototype.set=function(a){this.value=a;for(var e=0;e<this.listeners.length;++e)this.listeners[e](a)};J.prototype.provide=function(a){if(void 0!==this.res)throw"Resource has already been provided.";this.res=a;for(var e=0;e<this.queue.length;++e)this.queue[e](a);this.queue=null};J.prototype.await=function(a){if(void 0!==this.res)return a(this.res),this.res;this.queue.push(a)};var a=0;k={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",
CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"};"trim"in String.prototype||(String.prototype.trim=
function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"undefined"!==typeof E&&(E.exports={textXHR:K,relativeURL:y,resolveUrlToPage:C,shallowCopy:l,pusho:h,pushnew:c,pushnewo:w,arrayIndexOf:v,pick:I,makeElement:t,makeElementNS:D,removeChildren:f,miniJSONify:b,Observed:H,Awaited:J,AMINO_ACID_TRANSLATION:k})},{"./sha1":9}],12:[function(k,E,x){E=k("./promise/promise").Promise;k=k("./promise/polyfill").polyfill;x.Promise=E;x.polyfill=k},{"./promise/polyfill":17,"./promise/promise":18}],13:[function(k,
E,x){var c=k("./utils").isArray,h=k("./utils").isFunction;x.all=function(k){if(!c(k))throw new TypeError("You must pass an array to all.");return new this(function(c,v){function t(b){return function(h){x[b]=h;0===--f&&c(x)}}var x=[],f=k.length,b;0===f&&c([]);for(var l=0;l<k.length;l++)(b=k[l])&&h(b.then)?b.then(t(l),v):(x[l]=b,0===--f&&c(x))})}},{"./utils":22}],14:[function(k,E,x){(function(c,h){function k(){return function(){c.nextTick(t)}}function E(){var b=0,c=new f(t),h=document.createTextNode("");
c.observe(h,{characterData:!0});return function(){h.data=b=++b%2}}function v(){return function(){b.setTimeout(t,1)}}function t(){for(var b=0;b<l.length;b++){var f=l[b];(0,f[0])(f[1])}l=[]}var D="undefined"!==typeof window?window:{},f=D.MutationObserver||D.WebKitMutationObserver,b="undefined"!==typeof h?h:void 0===this?window:this,l=[],H;H="undefined"!==typeof c&&"[object process]"==={}.toString.call(c)?k():f?E():v();x.asap=function(b,f){1===l.push([b,f])&&H()}}).call(this,k("1YiZ5S"),"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"1YiZ5S":23}],15:[function(k,E,x){x.cast=function(c){return c&&"object"===typeof c&&c.constructor===this?c:new this(function(h){h(c)})}},{}],16:[function(k,E,x){var c={instrument:!1};x.config=c;x.configure=function(h,k){if(2===arguments.length)c[h]=k;else return c[h]}},{}],17:[function(k,E,x){(function(c){var h=k("./promise").Promise,w=k("./utils").isFunction;x.polyfill=function(){var k;k="undefined"!==typeof c?c:"undefined"!==typeof window&&
window.document?window:self;"Promise"in k&&"cast"in k.Promise&&"resolve"in k.Promise&&"reject"in k.Promise&&"all"in k.Promise&&"race"in k.Promise&&function(){var c;new k.Promise(function(h){c=h});return w(c)}()||(k.Promise=h)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./promise":18,"./utils":22}],18:[function(k,E,x){function c(a){if(!y(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof
c))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[];h(a,this)}function h(a,d){function e(a){D(d,a)}function f(a){b(d,a)}try{a(e,f)}catch(c){f(c)}}function w(a,d,e,f){var c=y(e),g,h,l,k;if(c)try{g=e(f),l=!0}catch(v){k=!0,h=v}else g=f,l=!0;t(d,g)||(c&&l?D(d,g):k?b(d,h):a===p?D(d,g):a===q&&b(d,g))}function I(a,d,e,b){a=a._subscribers;var f=a.length;a[f]=d;a[f+p]=e;a[f+q]=b}function v(a,d){for(var e,
b,f=a._subscribers,c=a._detail,p=0;p<f.length;p+=3)e=f[p],b=f[p+d],w(d,e,b,c);a._subscribers=null}function t(a,d){var e=null,c;try{if(a===d)throw new TypeError("A promises callback cannot return that same promise.");if(K(d)&&(e=d.then,y(e)))return e.call(d,function(e){if(c)return!0;c=!0;d!==e?D(a,e):f(a,e)},function(d){if(c)return!0;c=!0;b(a,d)}),!0}catch(p){if(c)return!0;b(a,p);return!0}return!1}function D(a,d){a===d?f(a,d):t(a,d)||f(a,d)}function f(a,b){a._state===d&&(a._state=e,a._detail=b,J.async(l,
a))}function b(a,b){a._state===d&&(a._state=e,a._detail=b,J.async(H,a))}function l(a){v(a,a._state=p)}function H(a){v(a,a._state=q)}var J=k("./config").config;k("./config");var K=k("./utils").objectOrFunction,y=k("./utils").isFunction;k("./utils");E=k("./cast").cast;var C=k("./all").all,g=k("./race").race,M=k("./resolve").resolve,a=k("./reject").reject;k=k("./asap").asap;J.async=k;var d=void 0,e=0,p=1,q=2;c.prototype={constructor:c,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,
d){var e=this,b=new this.constructor(function(){});if(this._state){var f=arguments;J.async(function(){w(e._state,b,f[e._state-1],e._detail)})}else I(this,b,a,d);return b},"catch":function(a){return this.then(null,a)}};c.all=C;c.cast=E;c.race=g;c.resolve=M;c.reject=a;x.Promise=c},{"./all":13,"./asap":14,"./cast":15,"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(k,E,x){var c=k("./utils").isArray;x.race=function(h){if(!c(h))throw new TypeError("You must pass an array to race.");
return new this(function(c,k){for(var v,t=0;t<h.length;t++)(v=h[t])&&"function"===typeof v.then?v.then(c,k):c(v)})}},{"./utils":22}],20:[function(k,E,x){x.reject=function(c){return new this(function(h,k){k(c)})}},{}],21:[function(k,E,x){x.resolve=function(c){return new this(function(h,k){h(c)})}},{}],22:[function(k,E,x){function c(c){return"function"===typeof c}k=Date.now||function(){return(new Date).getTime()};x.objectOrFunction=function(h){return c(h)||"object"===typeof h&&null!==h};x.isFunction=
c;x.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)};x.now=k},{}],23:[function(k,E,x){function c(){}k=E.exports={};k.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(c){return window.setImmediate(c)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var c=[];window.addEventListener("message",function(k){var x=k.source;x!==window&&null!==x||"process-tick"!==k.data||(k.stopPropagation(),0<c.length&&c.shift()())},
!0);return function(k){c.push(k);window.postMessage("process-tick","*")}}return function(c){setTimeout(c,0)}}();k.title="browser";k.browser=!0;k.env={};k.argv=[];k.on=c;k.addListener=c;k.once=c;k.off=c;k.removeListener=c;k.removeAllListeners=c;k.emit=c;k.binding=function(c){throw Error("process.binding is not supported");};k.cwd=function(){return"/"};k.chdir=function(c){throw Error("process.chdir is not supported");}},{}],24:[function(k,E,x){function c(){}function h(){this.was=[0]}function w(a,d,
e){this.hufts=new Int32Array(4320);this.window=new Uint8Array(e);this.end=e;this.checkfn=d;this.mode=0;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new I;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new v}function I(){}function v(){}function t(a,d,e,b,f){if(0!=f){if(!a)throw"Undef src";if(!e)throw"Undef dest";if(0==d&&f==a.length)e.set(a,b);else if(M)a=a.subarray(d,d+f),e.set(a,b);
else if(1==a.BYTES_PER_ELEMENT&&100<f)a=new Uint8Array(a.buffer,a.byteOffset+d,f),e.set(a,b);else for(var c=0;c<f;++c)e[b+c]=a[d+c]}}function D(a,d,e,b){a=d?e?new Uint8Array(a,d,e):new Uint8Array(a,d,a.byteLength-d):new Uint8Array(a);e=new c;e.inflateInit(15,!0);e.next_in=a;e.next_in_index=0;e.avail_in=a.length;a=[];for(var f=0;;){var g=new Uint8Array(32E3);e.next_out=g;e.next_out_index=0;e.avail_out=g.length;var r=e.inflate(0);if(0!=r&&1!=r&&-5!=r)throw e.msg;if(0!=e.avail_out){var n=new Uint8Array(g.length-
e.avail_out);t(g,0,n,0,g.length-e.avail_out);g=n}a.push(g);f+=g.length;if(1==r||-5==r)break}b&&(b[0]=(d||0)+e.next_in_index);if(1==a.length)return a[0].buffer;d=new Uint8Array(f);for(e=b=0;e<a.length;++e)f=a[e],t(f,0,d,b,f.length),b+=f.length;return d.buffer}var f=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],b=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,
0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,
19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,
0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,
139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,
80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,
22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,
0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,
207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],l=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],H=[3,4,5,6,7,8,9,10,11,13,
15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];c.prototype.inflateInit=function(a,d){a||(a=15);d&&(d=!1);this.istate=new h;return this.istate.inflateInit(this,d?-a:a)};c.prototype.inflate=function(a){return null==this.istate?
-2:this.istate.inflate(this,a)};c.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=istate.inflateEnd(this);this.istate=null;return a};c.prototype.inflateSync=function(){return istate.inflateSync(this)};c.prototype.inflateSetDictionary=function(a,d){return istate.inflateSetDictionary(this,a,d)};h.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};h.prototype.inflateEnd=
function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};h.prototype.inflateInit=function(a,d){this.blocks=a.msg=null;nowrap=0;0>d&&(d=-d,nowrap=1);if(8>d||15<d)return this.inflateEnd(a),-2;this.wbits=d;a.istate.blocks=new w(a,0!=a.istate.nowrap?null:this,1<<d);this.inflateReset(a);return 0};h.prototype.inflate=function(a,d){var e,b;if(null==a||null==a.istate||null==a.next_in)return-2;d=4==d?-5:0;for(e=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return e;e=d;a.avail_in--;
a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;b=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+b)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(b&32)){a.istate.mode=
7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return e;a.avail_in--;a.total_in++;
a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,a.msg="need dictionary",a.istate.marker=0,-2;case 7:e=a.istate.blocks.proc(a,e);if(-3==e){a.istate.mode=13;a.istate.marker=0;break}0==e&&(e=d);if(1!=e)return e;e=d;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<
24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";
a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};h.prototype.inflateSetDictionary=function(a,d,e){var b=0,f=e;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(a._adler.adler32(1,d,0,e)!=a.adler)return-3;a.adler=a._adler.adler32(0,null,0,0);f>=1<<a.istate.wbits&&(f=(1<<a.istate.wbits)-1,b=e-f);a.istate.blocks.set_dictionary(d,b,f);a.istate.mode=7;return 0};var C=[0,0,255,255];h.prototype.inflateSync=function(a){var d,e,b;if(null==a||null==a.istate)return-2;
13!=a.istate.mode&&(a.istate.mode=13,a.istate.marker=0);if(0==(d=a.avail_in))return-5;e=a.next_in_index;for(b=a.istate.marker;0!=d&&4>b;)a.next_in[e]==C[b]?b++:b=0!=a.next_in[e]?0:4-b,e++,d--;a.total_in+=e-a.next_in_index;a.next_in_index=e;a.avail_in=d;a.istate.marker=b;if(4!=b)return-3;d=a.total_in;e=a.total_out;this.inflateReset(a);a.total_in=d;a.total_out=e;a.istate.mode=7;return 0};h.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};
var g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];w.prototype.reset=function(a,d){d&&(d[0]=this.check);6==this.mode&&this.codes.free(a);this.read=this.write=this.bitb=this.bitk=this.mode=0;this.checkfn&&(a.adler=this.check=a._adler.adler32(0,null,0,0))};w.prototype.proc=function(a,d){var e,c,q,m,r,n,h;m=a.next_in_index;r=a.avail_in;c=this.bitb;q=this.bitk;n=this.write;for(h=n<this.read?this.read-n-1:this.end-n;;)switch(this.mode){case 0:for(;3>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=
q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}e=c&7;this.last=e&1;switch(e>>>1){case 0:c>>>=3;q-=3;e=q&7;c>>>=e;q-=e;this.mode=1;break;case 1:var u=new Int32Array(1),k=new Int32Array(1),v=[],z=[];e=k;var x=v,y=z;u[0]=9;e[0]=5;x[0]=b;y[0]=l;this.codes.init(u[0],k[0],v[0],0,z[0],0,a);c>>>=3;q-=3;this.mode=6;break;case 2:c>>>=3;q-=3;this.mode=3;break;case 3:return c>>>=3,q-=3,this.mode=13,a.msg="invalid block type",
d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d)}break;case 1:for(;32>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}if((~c>>>16&65535)!=(c&65535))return this.mode=13,a.msg="invalid stored block lengths",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=
m,this.write=n,this.inflate_flush(a,d);this.left=c&65535;c=q=0;this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==r)return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,write=n,this.inflate_flush(a,d);if(0==h&&(n==end&&0!=read&&(n=0,h=n<this.read?this.read-n-1:this.end-n),0==h&&(this.write=n,d=this.inflate_flush(a,d),n=this.write,h=n<this.read?this.read-n-1:this.end-n,n==this.end&&0!=this.read&&(n=0,h=n<this.read?this.read-n-1:this.end-n),0==h)))return this.bitb=
c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);d=0;e=this.left;e>r&&(e=r);e>h&&(e=h);t(a.next_in,m,this.window,n,e);m+=e;r-=e;n+=e;h-=e;if(0!=(this.left-=e))break;this.mode=0!=this.last?7:0;break;case 3:for(;14>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}this.table=e=c&16383;if(29<(e&31)||29<(e>>
5&31))return this.mode=9,a.msg="too many length or distance symbols",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);e=258+(e&31)+(e>>5&31);if(null==this.blens||this.blens.length<e)this.blens=new Int32Array(e);else for(h=0;h<e;h++)this.blens[h]=0;c>>>=14;q-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,
a.next_in_index=m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}this.blens[g[this.index++]]=c&7;c>>>=3;q-=3}for(;19>this.index;)this.blens[g[this.index++]]=0;this.bb[0]=7;e=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,a);if(0!=e)return d=e,-3==d&&(this.blens=null,this.mode=9),this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,write=n,this.inflate_flush(a,d);this.index=0;this.mode=5;case 5:for(;;){e=this.table;if(!(this.index<
258+(e&31)+(e>>5&31)))break;for(e=this.bb[0];q<e;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}e=this.hufts[3*(this.tb[0]+(c&f[e]))+1];k=this.hufts[3*(this.tb[0]+(c&f[e]))+2];if(16>k)c>>>=e,q-=e,this.blens[this.index++]=k;else{h=18==k?7:k-14;for(u=18==k?11:3;q<e+h;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=
m,this.write=n,this.inflate_flush(a,d);r--;c|=(a.next_in[m++]&255)<<q;q+=8}c>>>=e;q-=e;u+=c&f[h];c>>>=h;q-=h;h=this.index;e=this.table;if(h+u>258+(e&31)+(e>>5&31)||16==k&&1>h)return this.blens=null,this.mode=9,a.msg="invalid bit length repeat",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);k=16==k?this.blens[h-1]:0;do this.blens[h++]=k;while(0!=--u);this.index=h}}this.tb[0]=-1;u=new Int32Array(1);k=new Int32Array(1);v=
new Int32Array(1);z=new Int32Array(1);u[0]=9;k[0]=6;e=this.table;e=this.inftree.inflate_trees_dynamic(257+(e&31),1+(e>>5&31),this.blens,u,k,v,z,this.hufts,a);if(0!=e)return-3==e&&(this.blens=null,this.mode=13),d=e,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);this.codes.init(u[0],k[0],this.hufts,v[0],this.hufts,z[0],a);this.mode=6;case 6:this.bitb=c;this.bitk=q;a.avail_in=r;a.total_in+=m-a.next_in_index;a.next_in_index=m;
this.write=n;if(1!=(d=this.codes.proc(this,a,d)))return this.inflate_flush(a,d);d=0;this.codes.free(a);m=a.next_in_index;r=a.avail_in;c=this.bitb;q=this.bitk;n=this.write;h=n<this.read?this.read-n-1:this.end-n;if(0==this.last){this.mode=0;break}this.mode=7;case 7:this.write=n;d=this.inflate_flush(a,d);n=this.write;if(this.read!=this.write)return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);mode=12;case 8:return d=1,this.bitb=
c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);case 9:return d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d);default:return d=-2,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=m-a.next_in_index,a.next_in_index=m,this.write=n,this.inflate_flush(a,d)}};w.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};w.prototype.set_dictionary=
function(a,d,e){t(a,d,window,0,e);this.read=this.write=e};w.prototype.sync_point=function(){return 1==this.mode};w.prototype.inflate_flush=function(a,d){var e,b,c;b=a.next_out_index;c=this.read;e=(c<=this.write?this.write:this.end)-c;e>a.avail_out&&(e=a.avail_out);0!=e&&-5==d&&(d=0);a.avail_out-=e;a.total_out+=e;null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,c,e));t(this.window,c,a.next_out,b,e);b+=e;c+=e;c==this.end&&(c=0,this.write==this.end&&(this.write=0),e=this.write-
c,e>a.avail_out&&(e=a.avail_out),0!=e&&-5==d&&(d=0),a.avail_out-=e,a.total_out+=e,null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,c,e)),t(this.window,c,a.next_out,b,e),b+=e,c+=e);a.next_out_index=b;this.read=c;return d};I.prototype.init=function(a,d,b,c,f,g,h){this.mode=0;this.lbits=a;this.dbits=d;this.ltree=b;this.ltree_index=c;this.dtree=f;this.dtree_index=g;this.tree=null};I.prototype.proc=function(a,d,b){var c,g,m=0,h=0,n=0,l,k,t,n=d.next_in_index;l=d.avail_in;
m=a.bitb;h=a.bitk;k=a.write;for(t=k<a.read?a.read-k-1:a.end-k;;)switch(this.mode){case 0:if(258<=t&&10<=l&&(a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,b=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,a,d),n=d.next_in_index,l=d.avail_in,m=a.bitb,h=a.bitk,k=a.write,t=k<a.read?a.read-k-1:a.end-k,0!=b)){this.mode=1==b?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=
1;case 1:for(c=this.need;h<c;){if(0!=l)b=0;else return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);l--;m|=(d.next_in[n++]&255)<<h;h+=8}c=3*(this.tree_index+(m&f[c]));m>>>=this.tree[c+1];h-=this.tree[c+1];g=this.tree[c];if(0==g){this.lit=this.tree[c+2];this.mode=6;break}if(0!=(g&16)){this.get=g&15;this.len=this.tree[c+2];this.mode=2;break}if(0==(g&64)){this.need=g;this.tree_index=c/3+this.tree[c+2];break}if(0!=(g&32)){this.mode=7;break}this.mode=
9;d.msg="invalid literal/length code";b=-3;a.bitb=m;a.bitk=h;d.avail_in=l;d.total_in+=n-d.next_in_index;d.next_in_index=n;a.write=k;return a.inflate_flush(d,b);case 2:for(c=this.get;h<c;){if(0!=l)b=0;else return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);l--;m|=(d.next_in[n++]&255)<<h;h+=8}this.len+=m&f[c];m>>=c;h-=c;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(c=this.need;h<c;){if(0!=
l)b=0;else return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);l--;m|=(d.next_in[n++]&255)<<h;h+=8}c=3*(this.tree_index+(m&f[c]));m>>=this.tree[c+1];h-=this.tree[c+1];g=this.tree[c];if(0!=(g&16)){this.get=g&15;this.dist=this.tree[c+2];this.mode=4;break}if(0==(g&64)){this.need=g;this.tree_index=c/3+this.tree[c+2];break}this.mode=9;d.msg="invalid distance code";b=-3;a.bitb=m;a.bitk=h;d.avail_in=l;d.total_in+=n-d.next_in_index;d.next_in_index=
n;a.write=k;return a.inflate_flush(d,b);case 4:for(c=this.get;h<c;){if(0!=l)b=0;else return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);l--;m|=(d.next_in[n++]&255)<<h;h+=8}this.dist+=m&f[c];m>>=c;h-=c;this.mode=5;case 5:for(c=k-this.dist;0>c;)c+=a.end;for(;0!=this.len;){if(0==t&&(k==a.end&&0!=a.read&&(k=0,t=k<a.read?a.read-k-1:a.end-k),0==t&&(a.write=k,b=a.inflate_flush(d,b),k=a.write,t=k<a.read?a.read-k-1:a.end-k,k==a.end&&0!=a.read&&
(k=0,t=k<a.read?a.read-k-1:a.end-k),0==t)))return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);a.window[k++]=a.window[c++];t--;c==a.end&&(c=0);this.len--}this.mode=0;break;case 6:if(0==t&&(k==a.end&&0!=a.read&&(k=0,t=k<a.read?a.read-k-1:a.end-k),0==t&&(a.write=k,b=a.inflate_flush(d,b),k=a.write,t=k<a.read?a.read-k-1:a.end-k,k==a.end&&0!=a.read&&(k=0,t=k<a.read?a.read-k-1:a.end-k),0==t)))return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=
n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);b=0;a.window[k++]=this.lit;t--;this.mode=0;break;case 7:7<h&&(h-=8,l++,n--);a.write=k;b=a.inflate_flush(d,b);k=a.write;if(a.read!=a.write)return a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);this.mode=8;case 8:return b=1,a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);case 9:return b=-3,a.bitb=m,a.bitk=h,d.avail_in=
l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b);default:return b=-2,a.bitb=m,a.bitk=h,d.avail_in=l,d.total_in+=n-d.next_in_index,d.next_in_index=n,a.write=k,a.inflate_flush(d,b)}};I.prototype.free=function(a){};I.prototype.inflate_fast=function(a,b,c,g,h,m,k,n){var l,u,v,F,z,x,y,w,C,E,G,D;x=n.next_in_index;y=n.avail_in;F=k.bitb;z=k.bitk;w=k.write;C=w<k.read?k.read-w-1:k.end-w;a=f[a];E=f[b];do{for(;20>z;)y--,F|=(n.next_in[x++]&255)<<z,z+=8;l=F&a;u=c;v=g;D=3*(v+l);if(0==
(b=u[D]))F>>=u[D+1],z-=u[D+1],k.window[w++]=u[D+2],C--;else{do{F>>=u[D+1];z-=u[D+1];if(0!=(b&16)){b&=15;G=u[D+2]+(F&f[b]);F>>=b;for(z-=b;15>z;)y--,F|=(n.next_in[x++]&255)<<z,z+=8;l=F&E;u=h;v=m;D=3*(v+l);b=u[D];do if(F>>=u[D+1],z-=u[D+1],0!=(b&16)){for(b&=15;z<b;)y--,F|=(n.next_in[x++]&255)<<z,z+=8;l=u[D+2]+(F&f[b]);F>>=b;z-=b;C-=G;if(w>=l)l=w-l,k.window[w++]=k.window[l++],k.window[w++]=k.window[l++],G-=2;else{l=w-l;do l+=k.end;while(0>l);b=k.end-l;if(G>b){G-=b;if(0<w-l&&b>w-l){do k.window[w++]=k.window[l++];
while(0!=--b)}else t(k.window,l,k.window,w,b),w+=b;l=0}}do k.window[w++]=k.window[l++];while(0!=--G);break}else if(0==(b&64))l+=u[D+2],l+=F&f[b],D=3*(v+l),b=u[D];else return n.msg="invalid distance code",G=n.avail_in-y,G=z>>3<G?z>>3:G,y+=G,x-=G,z-=G<<3,k.bitb=F,k.bitk=z,n.avail_in=y,n.total_in+=x-n.next_in_index,n.next_in_index=x,k.write=w,-3;while(1);break}if(0==(b&64)){if(l+=u[D+2],l+=F&f[b],D=3*(v+l),0==(b=u[D])){F>>=u[D+1];z-=u[D+1];k.window[w++]=u[D+2];C--;break}}else{if(0!=(b&32))return G=n.avail_in-
y,G=z>>3<G?z>>3:G,y+=G,x-=G,z-=G<<3,k.bitb=F,k.bitk=z,n.avail_in=y,n.total_in+=x-n.next_in_index,n.next_in_index=x,k.write=w,1;n.msg="invalid literal/length code";G=n.avail_in-y;G=z>>3<G?z>>3:G;y+=G;x-=G;z-=G<<3;k.bitb=F;k.bitk=z;n.avail_in=y;n.total_in+=x-n.next_in_index;n.next_in_index=x;k.write=w;return-3}}while(1)}}while(258<=C&&10<=y);G=n.avail_in-y;G=z>>3<G?z>>3:G;x-=G;k.bitb=F;k.bitk=z-(G<<3);n.avail_in=y+G;n.total_in+=x-n.next_in_index;n.next_in_index=x;k.write=w;return 0};v.prototype.huft_build=
function(a,b,c,f,g,h,k,l,v,u,A){var x,z,w,y,C,D,E,G,H;D=0;z=c;do this.c[a[b+D]]++,D++,z--;while(0!=z);if(this.c[0]==c)return k[0]=-1,l[0]=0;C=l[0];for(w=1;15>=w&&0==this.c[w];w++);y=w;C<w&&(C=w);for(z=15;0!=z&&0==this.c[z];z--);u=z;C>z&&(C=z);l[0]=C;for(l=1<<w;w<z;w++,l<<=1)if(0>(l-=this.c[w]))return-3;if(0>(l-=this.c[z]))return-3;this.c[z]+=l;this.x[1]=w=0;D=1;for(E=2;0!=--z;)this.x[E]=w+=this.c[D],E++,D++;D=z=0;do 0!=(w=a[b+D])&&(this.v[this.x[w]++]=z),D++;while(++z<c);c=this.x[u];D=this.x[0]=z=
0;b=-1;G=-C;for(H=E=this.u[0]=0;y<=u;y++)for(a=this.c[y];0!=a--;){for(;y>G+C;){b++;G+=C;H=u-G;H=H>C?C:H;if((x=1<<(w=y-G))>a+1&&(x-=a+1,E=y,w<H))for(;++w<H&&!((x<<=1)<=this.c[++E]);)x-=this.c[E];H=1<<w;if(1440<this.hn[0]+H)return-3;this.u[b]=E=this.hn[0];this.hn[0]+=H;0!=b?(this.x[b]=z,this.r[0]=w,this.r[1]=C,w=z>>>G-C,this.r[2]=E-this.u[b-1]-w,t(this.r,0,v,3*(this.u[b-1]+w),3)):k[0]=E}this.r[1]=y-G;D>=c?this.r[0]=192:A[D]<f?(this.r[0]=256>this.v[D]?0:96,this.r[2]=this.v[D++]):(this.r[0]=h[this.v[D]-
f]+16+64,this.r[2]=g[this.v[D++]-f]);x=1<<y-G;for(w=z>>>G;w<H;w+=x)t(this.r,0,v,3*(E+w),3);for(w=1<<y-1;0!=(z&w);w>>>=1)z^=w;z^=w;for(w=(1<<G)-1;(z&w)!=this.x[b];)b--,G-=C,w=(1<<G)-1}return 0!=l&&1!=u?-5:0};v.prototype.inflate_trees_bits=function(a,b,c,f,g){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,f,this.hn,this.v);if(-3==a)g.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])g.msg="incomplete dynamic bit lengths tree",a=-3;return a};v.prototype.inflate_trees_dynamic=
function(a,b,c,f,g,h,k,l,t){this.initWorkArea(288);this.hn[0]=0;h=this.huft_build(c,0,a,257,H,J,h,f,l,this.hn,this.v);if(0!=h||0==f[0])return-3==h?t.msg="oversubscribed literal/length tree":-4!=h&&(t.msg="incomplete literal/length tree",h=-3),h;this.initWorkArea(288);h=this.huft_build(c,a,b,0,K,y,k,g,l,this.hn,this.v);return 0!=h||0==g[0]&&257<a?(-3==h?t.msg="oversubscribed distance tree":-5==h?(t.msg="incomplete distance tree",h=-3):-4!=h&&(t.msg="empty distance tree with lengths",h=-3),h):0};v.prototype.initWorkArea=
function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;t(this.c,0,this.u,0,15);t(this.c,0,this.x,0,16)};var M="function"===typeof(new Uint8Array(1)).subarray;"undefined"!==typeof E&&(E.exports={inflateBuffer:D,arrayCopy:t})},{}]},{},[7]);
