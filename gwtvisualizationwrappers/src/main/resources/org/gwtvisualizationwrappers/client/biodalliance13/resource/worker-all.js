(function e$$0(D,x,c){function k(v,t){if(!x[v]){if(!D[v]){var F="function"==typeof require&&require;if(!t&&F)return F(v,!0);if(y)return y(v,!0);throw Error("Cannot find module '"+v+"'");}F=x[v]={exports:{}};D[v][0].call(F.exports,function(f){var b=D[v][1][f];return k(b?b:f)},F,F.exports,e$$0,D,x,c)}return x[v].exports}for(var y="function"==typeof require&&require,I=0;I<c.length;I++)k(c[I]);return k})({1:[function(l,D,x){function c(){}function k(b,g,f,a,d){b.slice(0,10).fetch(function(e){return e?
y(b,g,f,a,d):a(null,"Couldn't access BAM.")},{timeout:5E3})}function y(w,g,f,a,d){function e(d){if(!d)return a(null,"Couldn't access BAM");d=h(d,d.byteLength);d=new Uint8Array(d);var e=v(d,0);if(21840194!=e)return a(null,"Not a BAM file, magic=0x"+e.toString(16));for(var n=v(d,4),u="",e=0;e<n;++e)u+=String.fromCharCode(d[e+8]);u=v(d,n+8);n+=12;p.chrToIndex={};p.indexToChr=[];for(e=0;e<u;++e){for(var g=v(d,n),q="",b=0;b<g-1;++b)q+=String.fromCharCode(d[n+4+b]);v(d,n+g+4);p.chrToIndex[q]=e;0==q.indexOf("chr")?
p.chrToIndex[q.substring(3)]=e:p.chrToIndex["chr"+q]=e;p.indexToChr.push(q);n=n+8+g}if(p.indices)return a(p)}var p=new c;p.data=w;p.bai=g;p.indexChunks=f;var q=p.indexChunks?p.indexChunks.minBlockIndex:1E9;if(p.indexChunks){g=p.indexChunks.chunks;p.indices=[];for(var n=0;n<g.length;n++)p.indices[n]=null;p.data.slice(0,q).fetch(e)}else p.bai.fetch(function(n){var m,g,u;if(n){var z=new Uint8Array(n),H=v(z,0);if(21578050!=H)n=a(null,"Not a BAI file, magic=0x"+H.toString(16));else{H=v(z,4);p.indices=
[];for(var A=8,L=0;L<H;++L){var B=A;m=z;var h=u=B;g=v(m,h);for(var h=h+4,c=0;c<g;++c){v(m,h);var t=v(m,h+4),h=h+(8+16*t)}for(var c=v(m,h),h=h+4,t=1E9,E=h,l=0;l<c;++l){var k=b(m,E),E=E+8;if(k){m=k.block;0<k.offset&&(m+=65536);m<t&&(t=m);break}}h+=8*c;m=t;u=h-u;A+=u;q=Math.min(m,q);0<g&&(p.indices[L]=new Uint8Array(n,B,A-B))}n=!0}}else n="Couldn't access BAI";!0!==n?p.bai.url&&"undefined"===typeof d?(p.bai.url=p.data.url.replace(/.bam$/,".bai"),y(w,p.bai,f,a,!0)):a(null,n):p.data.slice(0,q).fetch(e)})}
function I(){}if("undefined"!==typeof l){l("./spans");x=l("./bin");var v=x.readInt,t=x.readShort,F=x.readByte,f=x.readFloat;l=l("./lh3utils");var b=l.readVob,h=l.unbgzf,E=l.reg2bins,J=l.Chunk}l={MULTIPLE_SEGMENTS:1,ALL_SEGMENTS_ALIGN:2,SEGMENT_UNMAPPED:4,NEXT_SEGMENT_UNMAPPED:8,REVERSE_COMPLEMENT:16,NEXT_REVERSE_COMPLEMENT:32,FIRST_SEGMENT:64,LAST_SEGMENT:128,SECONDARY_ALIGNMENT:256,QC_FAIL:512,DUPLICATE:1024,SUPPLEMENTARY:2048};c.prototype.blocksForRange=function(w,g,f){var a=this.indices[w];if(!a)return[];
w=E(g,f);for(var d=[],e=0;e<w.length;++e)d[w[e]]=!0;w=[];for(var p=[],e=v(a,0),q=4,n=0;n<e;++n){var r=v(a,q),m=v(a,q+4),q=q+8;if(d[r])for(var C=0;C<m;++C){var u=b(a,q),z=b(a,q+8);(4681>r?p:w).push(new J(u,z));q+=16}else q+=16*m}e=v(a,q);d=null;g=Math.min(g>>14,e-1);f=Math.min(f>>14,e-1);for(e=g;e<=f;++e)(g=b(a,q+4+8*e))&&(!d||g.block<d.block||g.offset<d.offset)&&(d=g);a=[];if(null!=d)for(e=0;e<p.length;++e)f=p[e],f.maxv.block>=d.block&&f.maxv.offset>=d.offset&&a.push(f);p=a;a=[];for(e=0;e<p.length;++e)a.push(p[e]);
for(e=0;e<w.length;++e)a.push(w[e]);a.sort(function(a,d){var e=a.minv.block-d.minv.block;return 0!=e?e:a.minv.offset-d.minv.offset});w=[];if(0<a.length){p=a[0];for(e=1;e<a.length;++e)f=a[e],f.minv.block==p.maxv.block?p=new J(p.minv,f.maxv):(w.push(p),p=f);w.push(p)}return w};c.prototype.fetch=function(b,g,f,a,d){function e(){if(C>=n.length)return a(m);if(u){var r=new Uint8Array(u),r=p.readBamRecords(r,n[C].minv.offset,m,g,f,q,d);u=null;++C;return r?a(m):e()}var b=n[C],r=b.minv.block;p.data.slice(r,
b.maxv.block+65536-r).fetch(function(a){u=h(a,b.maxv.block-b.minv.block+1);return e()})}var p=this;d=d||{};var q=this.chrToIndex[b],n;if(void 0===q)n=[];else{if(null===this.indices[q]&&this.indexChunks.chunks[q]){var r=this.indexChunks.chunks[q];return this.bai.slice(r[0],r[1]).fetch(function(e){e=new Uint8Array(e);this.indices[q]=e;return this.fetch(b,g,f,a,d)}.bind(this))}(n=this.blocksForRange(q,g,f))||a(null,"Error in index fetch")}var m=[],C=0,u;e()};var K="=ACxGxxxTxxxxxxN".split(""),B="MIDNSHP=X???????".split("");
c.prototype.readBamRecords=function(b,g,h,a,d,e,p){for(;;){var q=v(b,g),q=g+q+4;if(q>=b.length)return!1;var n=new I,r=v(b,g+4),m=v(b,g+8),C=v(b,g+12),u=(C&65280)>>8,z=C&255,C=v(b,g+16),H=(C&4294901760)>>16,A=C&65535,C=v(b,g+20),L=v(b,g+24),c=v(b,g+28);v(b,g+32);n.segment=this.indexToChr[r];n.flag=H;n.pos=m;n.mq=u;p.light&&(n.seqLength=C);if(!p.light){0<=L&&(n.nextSegment=this.indexToChr[L],n.nextPos=c);u="";for(m=0;m<z-1;++m)u+=String.fromCharCode(b[g+36+m]);n.readName=u;g=g+36+z;z="";for(m=0;m<A;++m)u=
v(b,g),z=z+(u>>4)+B[u&15],g+=4;n.cigar=z;A="";z=C+1>>1;for(m=0;m<z;++m)u=b[g+m],A+=K[(u&240)>>4],A.length<C&&(A+=K[u&15]);g+=z;n.seq=A;A="";for(m=0;m<C;++m)A+=String.fromCharCode(b[g+m]+33);g+=C;for(n.quals=A;g<q;){A=String.fromCharCode(b[g],b[g+1]);z=String.fromCharCode(b[g+2]);if("A"==z)z=String.fromCharCode(b[g+3]),g+=4;else if("i"==z||"I"==z)z=v(b,g+3),g+=7;else if("c"==z||"C"==z)z=b[g+3],g+=4;else if("s"==z||"S"==z)z=t(b,g+3),g+=5;else if("f"==z)z=f(b,g+3),g+=7;else if("Z"==z||"H"==z)for(g+=
3,z="";m=b[g++],0!=m;)z+=String.fromCharCode(m);else if("B"==z){z=String.fromCharCode(b[g+3]);m=v(b,g+4);if("i"==z||"I"==z||"f"==z)u=4,H="f"==z?f:v;else if("s"==z||"S"==z)u=2,H=t;else if("c"==z||"C"==z)u=1,H=F;else throw"Unknown array type "+z;g+=8;z=[];for(L=0;L<m;++L)z.push(H(b,g)),g+=u}else throw"Unknown type "+z;n[A]=z}}if(!a||n.pos<=d&&n.pos+C>=a)void 0!==e&&r!=e||h.push(n);if(n.pos>d)return!0;g=q}};"undefined"!==typeof D&&(D.exports={makeBam:k,BAM_MAGIC:21840194,BAI_MAGIC:21578050,BamFlags:l})},
{"./bin":3,"./lh3utils":8,"./spans":10}],2:[function(l,D,x){function c(g,b){return g[b]+256*g[b+1]+65536*g[b+2]+16777216*g[b+3]+4294967296*g[b+4]}function k(){}function y(g,b,a,d){this.bwg=g;this.cirTreeOffset=b;this.cirTreeLength=a;this.isSummary=d}function I(g,b,a){var d=new k;d.data=g;d.name=a;d.data.slice(0,512).salted().fetch(function(a){if(!a)return b(null,"Couldn't fetch file");var p=new Uint8Array(a),g=new Int16Array(a);a=new Int32Array(a);var n=p[0]+256*p[1]+65536*p[2]+16777216*p[3];if(2291137574==
n)d.type="bigwig";else if(2273964779==n)d.type="bigbed";else return 654086024==n||3958540679==n?b(null,"Currently don't support big-endian BBI files"):b(null,"Not a supported format, magic=0x"+n.toString(16));d.version=g[2];d.numZoomLevels=g[3];d.chromTreeOffset=c(p,8);d.unzoomedDataOffset=c(p,16);d.unzoomedIndexOffset=c(p,24);d.fieldCount=g[16];d.definedFieldCount=g[17];d.asOffset=c(p,36);d.totalSummaryOffset=c(p,44);d.uncompressBufSize=a[13];d.extHeaderOffset=c(p,56);d.zoomLevels=[];for(g=0;g<d.numZoomLevels;++g){var n=
a[6*g+16],r=c(p,24*g+72),m=c(p,24*g+80);d.zoomLevels.push({reduction:n,dataOffset:r,indexOffset:m})}d.readChromTree(function(){d.getAutoSQL(function(a){d.schema=a;return b(d)})})},{timeout:5E3})}function v(g,b,a,d,e){this.bbi=g;this.type=b;this.fieldCount=a;this.offset=d;this.field=e}if("undefined"!==typeof l){x=l("./spans");var t=x.Range,F=x.union,f=x.intersection;x=l("./das");var b=x.DASFeature,h=x.DASGroup,E=l("./utils").shallowCopy,J=l("./bin").readInt;l=l("jszlib");var K=l.inflateBuffer,B=l.arrayCopy}var w=
/^[0-9]+,[0-9]+,[0-9]+/;k.prototype.readChromTree=function(g){var b=this;this.chromsToIDs={};this.idsToChroms={};this.maxID=0;var a=this.unzoomedDataOffset,a=a+4-(a-this.chromTreeOffset&3);this.data.slice(this.chromTreeOffset,a-this.chromTreeOffset).fetch(function(a){var e=new Uint8Array(a),p=new Int16Array(a),q=(new Int32Array(a))[2];c(e,16);var n=function(a){var d=e[a],g=p[a/2+1];a+=4;for(var u=0;u<g;++u)if(0==d){a+=q;var z=c(e,a);a+=8;z-=b.chromTreeOffset;n(z)}else{for(var z="",f=0;f<q;++f){var A=
e[a++];0!=A&&(z+=String.fromCharCode(A))}f=e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a+0];a+=8;b.chromsToIDs[z]=f;0==z.indexOf("chr")&&(b.chromsToIDs[z.substr(3)]=f);b.idsToChroms[f]=z;b.maxID=Math.max(b.maxID,f)}};n(32);g(b)})};y.prototype.readWigData=function(g,b,a,d){g=this.bwg.chromsToIDs[g];if(void 0===g)return d([]);this.readWigDataById(g,b,a,d)};y.prototype.readWigDataById=function(g,b,a,d){var e=this;if(this.cirHeader){var p=[],q=0;Date.now();var n=function(d,e,n,p){return(0>g||d==g)&&e<=a&&n>=b},
r=function(a,r){e.bwg.instrument&&console.log("level="+r+"; offset="+a+"; time="+(Date.now()|0));q+=a.length;if(1==a.length&&48==a[0]-e.cirTreeOffset&&e.cachedCirRoot)C(e.cachedCirRoot,0,r),--q,0==q&&e.fetchFeatures(n,p,d);else{for(var g=4+32*e.cirBlockSize,b,f=0;f<a.length;++f){var w=new t(a[f],a[f]+g);b=b?F(b,w):w}g=b.ranges();for(b=0;b<g.length;++b)m(a,g[b],r)}},m=function(a,r,m,g){r.max();r.min();e.bwg.data.slice(r.min(),r.max()-r.min()).fetch(function(g){for(var b=0;b<a.length;++b)r.contains(a[b])&&
(C(g,a[b]-r.min(),m),48==a[b]-e.cirTreeOffset&&0==a[b]-r.min()&&(e.cachedCirRoot=g),--q,0==q&&e.fetchFeatures(n,p,d))})},C=function(d,e,n){var m=new Uint8Array(d),q=new Int16Array(d);d=new Int32Array(d);var C=m[e],q=q[e/2+1];e+=4;if(0!=C)for(C=0;C<q;++C){var f=e/4,w=d[f],h=d[f+1],B=d[f+2],f=d[f+3],t=c(m,e+16);n=c(m,e+24);(0>g||w<g||w==g&&h<=a)&&(0>g||B>g||B==g&&f>=b)&&p.push({offset:t,size:n});e+=32}else{for(var v=[],C=0;C<q;++C)f=e/4,w=d[f],h=d[f+1],B=d[f+2],f=d[f+3],t=c(m,e+16),(0>g||w<g||w==g&&
h<=a)&&(0>g||B>g||B==g&&f>=b)&&v.push(t),e+=24;0<v.length&&r(v,n+1)}};r([e.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(n){e.cirHeader=n;n=new Int32Array(e.cirHeader);e.cirBlockSize=n[1];e.readWigDataById(g,b,a,d)})};y.prototype.fetchFeatures=function(g,f,a){var d=this;f.sort(function(a,d){return(a.offset|0)-(d.offset|0)});if(0==f.length)a([]);else{var e=[],p=function(a,p,m,g){g||(g={});var u=new b;u._chromId=a;u.segment=d.bwg.idsToChroms[a];u.min=p;u.max=m;
u.type=d.bwg.type;for(var q in g)u[q]=g[q];e.push(u)},q=function(){if(0==f.length)Date.now(),a(e);else{var n=f[0];if(n.data)d.parseFeatures(n.data,p,g),f.splice(0,1),q();else{for(var r=n.offset,m=n.size,n=1;n<f.length&&f[n].offset==r+m;)m+=f[n].size,++n;d.bwg.data.slice(r,m).fetch(function(a){for(var e=0,n=0;e<m;){var p=f[n],r;0<d.bwg.uncompressBufSize?r=K(a,e+2,p.size-2):(r=new Uint8Array(p.size),B(new Uint8Array(a,e,p.size),0,r,0,p.size),r=r.buffer);p.data=r;e+=p.size;++n}q()})}}};q()}};y.prototype.parseFeatures=
function(g,b,a){var d=new Uint8Array(g);if(this.isSummary)for(var e=new Int16Array(g),p=new Int32Array(g),q=new Float32Array(g),d=g.byteLength/32,e=0;e<d;++e){g=p[8*e];var n=p[8*e+1],r=p[8*e+2],m=p[8*e+3],C=q[8*e+5],u=q[8*e+6];a(g,n+1,r)&&(m={type:"bigwig",score:u/m,maxScore:C},"bigbed"==this.bwg.type&&(m.type="density"),b(g,n+1,r,m))}else if("bigwig"==this.bwg.type)if(e=new Int16Array(g),p=new Int32Array(g),q=new Float32Array(g),g=p[0],C=p[1],u=p[3],m=p[4],n=d[20],d=e[11],3==n)for(e=0;e<d;++e){var z=
q[e+6],p=C+e*u+1,n=C+e*u+m;a(g,p,n)&&b(g,p,n,{score:z})}else if(2==n)for(e=0;e<d;++e)n=p[2*e+6]+1,r=n+m-1,z=q[2*e+7],a(g,n,r)&&b(g,n,r,{score:z});else if(1==n)for(e=0;e<d;++e)n=p[3*e+6]+1,r=p[3*e+7],z=q[3*e+8],n>r&&(n=r),a(g,n,r)&&b(g,n,r,{score:z});else console.log("Currently not handling bwgType="+n);else if("bigbed"==this.bwg.type)for(e=0,m=this.bwg.definedFieldCount,C=this.bwg.schema;e<d.length;){g=d[e+3]<<24|d[e+2]<<16|d[e+1]<<8|d[e+0];n=d[e+7]<<24|d[e+6]<<16|d[e+5]<<8|d[e+4];r=d[e+11]<<24|d[e+
10]<<16|d[e+9]<<8|d[e+8];e+=12;for(z="";;)if(u=d[e++],0!=u)z+=String.fromCharCode(u);else break;var u={},H;H=0<z.length?z.split("\t"):[];0<H.length&&3<m&&(u.label=H[0]);1<H.length&&4<m&&(z=parseInt(H[1]),isNaN(z)||(u.score=z));2<H.length&&5<m&&(u.orientation=H[2]);5<H.length&&8<m&&(z=H[5],w.test(z)&&(u.itemRgb="rgb("+z+")"));if(H.length>m-3&&C)for(z=m-3;z<H.length;++z)u[C.fields[z+3].name]=H[z];if(a(g,n+1,r,H))if(12>m)b(g,n+1,r,u);else{var z=H[3]|0,A=H[4]|0,B=H[6]|0,c=H[7].split(","),v=H[8].split(",");
u.exonFrames&&(q=u.exonFrames.split(","),u.exonFrames=void 0);u.type="transcript";var k=new h;for(p in u)k[p]=u[p];k.id=H[0];k.segment=this.bwg.idsToChroms[g];k.min=n+1;k.max=r;k.notes=[];u.groups=[k];if(9<H.length){var l=r=u.geneName||H[9];10<H.length&&(l=H[10]);u.geneName2&&(l=u.geneName2);H=E(k);H.id=r;H.label=l;H.type="gene";u.groups.push(H)}r=[];for(H=0;H<B;++H)k=(v[H]|0)+n,k=new t(k,k+(c[H]|0)),r.push(k);c=F(r);B=c.ranges();for(n=0;n<B.length;++n)r=B[n],b(g,r.min()+1,r.max(),u);if(A>z&&(n="+"==
u.orientation?new t(z,A+3):new t(z-3,A),n=f(c,n))){u.type="translation";z=n.ranges();for(c=A=0;z[0].min()>B[c].max();)c++;for(n=0;n<z.length;++n)B=n,"-"==u.orientation&&(B=z.length-n-1),r=z[B],u.readframe=A,q&&(B=parseInt(q[B+c]),"number"===typeof B&&0<=B&&2>=B&&(u.readframe=B,u.readframeExplicit=!0)),B=r.max()-r.min(),A=(A+B)%3,b(g,r.min()+1,r.max(),u)}}}else throw Error("Don't know what to do with "+this.bwg.type);};y.prototype.getFirstAdjacent=function(g,b,a,d){g=this.bwg.chromsToIDs[g];if(void 0===
g)return d([]);this.getFirstAdjacentById(g,b,a,d)};y.prototype.getFirstAdjacentById=function(g,b,a,d){var e=this;if(this.cirHeader){var p=null,q=-1,n=-1,r=0;Date.now();var m=function(a,d){r+=a.length;for(var n=4+32*e.cirBlockSize,p,m=0;m<a.length;++m){var g=new t(a[m],a[m]+n);p=p?F(p,g):g}n=p.ranges();for(p=0;p<n.length;++p)C(a,n[p],d)},C=function(n,m,q,C){m.max();m.min();e.bwg.data.slice(m.min(),m.max()-m.min()).fetch(function(C){for(var f=0;f<n.length;++f)if(m.contains(n[f])&&(u(C,n[f]-m.min(),
q),--r,0==r)){if(!p)return 0<a&&(0!=g||0<b)?e.getFirstAdjacentById(0,0,a,d):0>a&&(g!=e.bwg.maxID||1E9>b)?e.getFirstAdjacentById(e.bwg.maxID,1E9,a,d):d([]);e.fetchFeatures(function(d,e,n,p){return 0>a&&(d<g||n<b)||0<a&&(d>g||e>b)},[p],function(e){for(var n=null,p=-1,r=-1,m=0;m<e.length;++m){var g=e[m],b=g._chromId,u=g.min,q=g.max;if(null==n||0>a&&(b>p||q>r)||0<a&&(b<p||u<r))n=g,r=0>a?q:u,p=b}return null!=n?d([n]):d([])})}})},u=function(d,r,u){var C=new Uint8Array(d),f=new Int16Array(d);d=new Int32Array(d);
var B=C[r],f=f[r/2+1];r+=4;if(0!=B)for(B=0;B<f;++B){var w=r/4,h=d[w],t=d[w+1],v=d[w+2],k=d[w+3],w=c(C,r+16);u=c(C,r+24);(0>a&&(h<g||h==g&&t<=b)||0<a&&(v>g||v==g&&k>=b))&&!/_random/.exec(e.bwg.idsToChroms[h])&&(null==p||0>a&&(v>q||v==q&&k>n)||0<a&&(h<q||h==q&&t<n))&&(p={offset:w,size:u},n=0>a?k:t,q=0>a?v:h);r+=32}else{for(var E=C=-1,B=0;B<f;++B){w=r/4;h=d[w];t=d[w+1];v=d[w+2];k=d[w+3];w=d[w+4]<<32|d[w+5];if(0>a&&(h<g||h==g&&t<=b)&&v>=g||0<a&&(v>g||v==g&&k>=b)&&h<=g)if(0>C||k>E)C=w,E=0>a?k:t;r+=24}0<=
C&&m([C],u+1)}};m([e.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(n){e.cirHeader=n;n=new Int32Array(e.cirHeader);e.cirBlockSize=n[1];e.getFirstAdjacentById(g,b,a,d)})};k.prototype.readWigData=function(g,b,a,d){this.getUnzoomedView().readWigData(g,b,a,d)};k.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var g=4E3;this.zoomLevels[0]&&(g=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset);this.unzoomedView=new y(this,this.unzoomedIndexOffset,g,
!1)}return this.unzoomedView};k.prototype.getZoomedView=function(g){g=this.zoomLevels[g];g.view||(g.view=new y(this,g.indexOffset,4E3,!0));return g.view};k.prototype._tsFetch=function(g,b,a,d,e){var p=this;if(g>=this.zoomLevels.length-1){if(this.topLevelReductionCache){for(var q=[],n=this.topLevelReductionCache,r=0;r<n.length;++r)n[r]._chromId==b&&q.push(n[r]);return e(q)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3E8,function(n){p.topLevelReductionCache=n;return p._tsFetch(g,
b,a,d,e)})}else return(0>g?this.getUnzoomedView():this.getZoomedView(g)).readWigDataById(b,a,d,e)};k.prototype.thresholdSearch=function(b,f,a,d,e){function p(){if(0==n.length)return e(null);n.sort(function(d,e){var n=d.zoom-e.zoom;if(0!=n)return n;n=d.chrOrd-e.chrOrd;return 0!=n?n:d.min-e.min*a});var r=n.splice(0,1)[0];q._tsFetch(r.zoom,r.chr,r.min,r.max,function(m){var b=0<a?0:3E8;r.fromRef&&(b=f);for(var g=0;g<m.length;++g){var q=m[g],w;w=void 0!=q.maxScore?q.maxScore:q.score;if(0<a){if(w>d)if(0>
r.zoom){if(q.min>b)return e(q)}else q.max>b&&n.push({chr:r.chr,chrOrd:r.chrOrd,zoom:r.zoom-2,min:q.min,max:q.max,fromRef:r.fromRef})}else if(w>d)if(0>r.zoom){if(q.max<b)return e(q)}else q.min<b&&n.push({chr:r.chr,chrOrd:r.chrOrd,zoom:r.zoom-2,min:q.min,max:q.max,fromRef:r.fromRef})}p()})}a=0>a?-1:1;var q=this;b=this.chromsToIDs[b];for(var n=[{chrOrd:0,chr:b,zoom:q.zoomLevels.length-4,min:0,max:3E8,fromRef:!0}],r=1;r<=this.maxID+1;++r){var m=(b+a*r)%(this.maxID+1);0>m&&(m+=this.maxID+1);n.push({chrOrd:r,
chr:m,zoom:q.zoomLevels.length-1,min:0,max:3E8})}p()};k.prototype.getAutoSQL=function(b){if(!this.asOffset)return b(null);this.data.slice(this.asOffset,2048).fetch(function(f){var a=new Uint8Array(f);f="";for(var d=0;d<a.length&&0!=a[d];++d)f+=String.fromCharCode(a[d]);var a=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,e=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(f);if(e){d={declType:e[1],name:e[2],comment:e[4],fields:[]};f=f.substring(e[0]);for(e=a.exec(f);null!=e;e=a.exec(f))d.fields.push({type:e[1],
name:e[2],comment:e[4]});return b(d)}})};k.prototype.getExtraIndices=function(b){var f=this;if(4>this.version||0==this.extHeaderOffset||"bigbed"!=this.type)return b(null);this.data.slice(this.extHeaderOffset,64).fetch(function(a){if(!a)return b(null,"Couldn't fetch extension header");var d=new Uint8Array(a),e=new Int16Array(a);new Int32Array(a);var p=e[1];a=c(d,4);if(0==p)return b(null);f.data.slice(a,20*p).fetch(function(a){if(!a)return b(null,"Couldn't fetch index info");var d=new Uint8Array(a),
e=new Int16Array(a);new Int32Array(a);a=[];for(var m=0;m<p;++m){var C=e[10*m],u=e[10*m+1],w=c(d,20*m+4),C=new v(f,C,u,w,e[10*m+8]);a.push(C)}b(a)})})};v.prototype.lookup=function(b,f){var a=this;this.bbi.data.slice(this.offset,32).fetch(function(d){function e(d){a.bbi.data.slice(d,4+q*(n+r)).fetch(function(d){var p=new Uint8Array(d),m=new Uint16Array(d);new Uint32Array(d);m=m[1];d=4;if(0==p[0]){for(var q=null,w=0;w<m;++w){for(var B="",h=0;h<n;++h){var t=p[d++];0!=t&&(B+=String.fromCharCode(t))}h=
c(p,d);d+=8;if(0>b.localeCompare(B)&&q){e(q);return}q=h}e(q)}else{for(w=0;w<m;++w){B="";for(h=0;h<n;++h)t=p[d++],0!=t&&(B+=String.fromCharCode(t));if(B==b)return m=c(p,d),p=J(p,d+8),a.bbi.getUnzoomedView().fetchFeatures(function(d,e,n,p){if(p&&p.length>a.field-3)return p[a.field-3]==b},[{offset:m,size:p}],f);d+=r}return f([])}})}var p=new Uint8Array(d);new Int16Array(d);d=new Int32Array(d);var q=d[1],n=d[2],r=d[3];c(p,16);e(a.offset+32)})};"undefined"!==typeof D&&(D.exports={makeBwg:I,BIG_BED_MAGIC:2273964779,
BIG_WIG_MAGIC:2291137574})},{"./bin":3,"./das":5,"./spans":10,"./utils":11,jszlib:24}],3:[function(l,D,x){function c(b){this.blob=b}function k(b,f,g,h){h||("object"===typeof f?(h=f,f=void 0):h={});this.url=b;this.start=f||0;g&&(this.end=g);this.opts=h}function y(b){if(!b)return null;for(var f=new Uint8Array(b.length),g=0;g<f.length;++g)f[g]=b.charCodeAt(g);return f.buffer}function I(b,f){return b[f+7]<<24|b[f+6]<<16|b[f+5]<<8|b[f+4]}function v(b,f){return b[f+3]<<24|b[f+2]<<16|b[f+1]<<8|b[f]}function t(b,
f){return b[f+1]<<8|b[f]}function F(b,f){return b[f]}function f(b,f){return b[f]<<24|b[f+1]<<16|b[f+2]<<8|b[f+3]}if("undefined"!==typeof l)var b=l("./utils").shallowCopy,h=l("./sha1").b64_sha1,E=l("es6-promise").Promise;c.prototype.slice=function(b,f){var g;g=this.blob.slice?f?this.blob.slice(b,b+f):this.blob.slice(b):f?this.blob.webkitSlice(b,b+f):this.blob.webkitSlice(b);return new c(g)};c.prototype.salted=function(){return this};c.prototype.fetch="undefined"!==typeof FileReader?function(b){var f=
new FileReader;f.onloadend=function(g){b(y(f.result))};f.readAsBinaryString(this.blob)}:function(b){var f=new FileReaderSync;try{var g=f.readAsArrayBuffer(this.blob);b(g)}catch(h){b(null,h)}};k.prototype.slice=function(b,f){if(0>b)throw"Bad slice "+b;var g=this.start,h=this.end,g=g&&b?g+b:b||g;return new k(this.url,g,f&&g?g+f-1:h||f-1,this.opts)};var J=0,K=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");k.prototype.fetchAsText=function(b){try{var f=new XMLHttpRequest,
g=this.url;(K||this.opts.salt)&&0>g.indexOf("?")&&(g=g+"?salt="+h(""+Date.now()+","+ ++J));f.open("GET",g,!0);if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";f.setRequestHeader("Range","bytes="+this.start+"-"+this.end)}f.onreadystatechange=function(){if(4==f.readyState)return 200==f.status||206==f.status?b(f.responseText):b(null)};this.opts.credentials&&(f.withCredentials=!0);f.send("")}catch(c){return b(null)}};k.prototype.salted=function(){var f=b(this.opts);f.salt=!0;return new k(this.url,
this.start,this.end,f)};k.prototype.getURL=function(){return this.opts.resolver?this.opts.resolver(this.url).then(function(b){return"string"===typeof b?b:b.url}):E.resolve(this.url)};k.prototype.fetch=function(b,f){var g=this;f=f||{};var c=f.attempt||1,a=f.truncatedLength;if(3<c)return b(null);this.getURL().then(function(d){try{var e;f.timeout&&!g.opts.credentials&&(e=setTimeout(function(){console.log("timing out "+d);p.abort();return b(null,"Timeout")},f.timeout));var p=new XMLHttpRequest,q;(K||
g.opts.salt)&&0>d.indexOf("?")&&(d=d+"?salt="+h(""+Date.now()+","+ ++J));p.open("GET",d,!0);p.overrideMimeType("text/plain; charset=x-user-defined");if(g.end){if(1E8<g.end-g.start)throw"Monster fetch!";p.setRequestHeader("Range","bytes="+g.start+"-"+g.end);q=g.end-g.start+1}p.responseType="arraybuffer";p.onreadystatechange=function(){if(4==p.readyState){e&&clearTimeout(e);if(200==p.status||206==p.status){if(p.response){var d=p.response.byteLength;return!q||q==d||a&&d==a?b(p.response):g.fetch(b,{attempt:c+
1,truncatedLength:d})}if(p.mozResponseArrayBuffer)return b(p.mozResponseArrayBuffer);d=p.responseText;return!q||q==d.length||a&&d.length==a?b(y(p.responseText)):g.fetch(b,{attempt:c+1,truncatedLength:d.length})}return g.fetch(b,{attempt:c+1})}};g.opts.credentials&&(p.withCredentials=!0);p.send("")}catch(n){return b(null)}}).catch(function(a){console.log(a);return b(null,a)})};(function(b){var f=new ArrayBuffer(8),g=new Uint8Array(f),h=new Float32Array(f);b.readFloat=function(a,d){g[0]=a[d];g[1]=a[d+
1];g[2]=a[d+2];g[3]=a[d+3];return h[0]}})(this);"undefined"!==typeof D&&(D.exports={BlobFetchable:c,URLFetchable:k,readInt:v,readIntBE:f,readInt64:I,readShort:t,readByte:F,readFloat:this.readFloat})},{"./sha1":9,"./utils":11,"es6-promise":12}],4:[function(l,D,x){function c(b,f,c,t){this.red=b|0;this.green=f|0;this.blue=c|0;t&&(this.name=t)}function k(b){b="00"+b.toString(16);return b.substring(b.length-2)}function y(b){var h=t[b];h||((h=F.exec(b))?h=new c("0x"+h[1]|0,"0x"+h[2]|0,"0x"+h[3]|0,b):(h=
f.exec(b))?h=new c(h[1]|0,h[2]|0,h[3]|0,b):(console.log("couldn't handle color: "+b),h=t.black),t[b]=h);return h}function I(b,f,t){for(var v=[],k=0;k<t.length;++k)v.push(y(t[k]));t=[];k=0;a:for(;k<b;++k){for(var B=f[0]+1*k/(b-1)*(f[f.length-1]-f[0]),w=0;w<f.length-1;++w)if(B>=f[w]&&B<=f[w+1]){var B=(B-f[w])/(f[w+1]-f[w]),g=v[w],w=v[w+1],w=(new c(g.red*(1-B)+w.red*B|0,g.green*(1-B)+w.green*B|0,g.blue*(1-B)+w.blue*B|0)).toSvgString();t.push(w);continue a}throw"Bad step";}return t}function v(b,f,c,t){return t?
I(b,[0,.5,1],[f,c,t]):I(b,[0,1],[f,c])}c.prototype.toSvgString=function(){this.name||(this.name="rgb("+this.red+","+this.green+","+this.blue+")");return this.name};c.prototype.toHexString=function(){return"#"+k(this.red)+k(this.green)+k(this.blue)};var t={red:new c(255,0,0,"red"),green:new c(0,255,0,"green"),blue:new c(0,0,255,"blue"),yellow:new c(255,255,0,"yellow"),white:new c(255,255,255,"white"),black:new c(0,0,0,"black"),gray:new c(180,180,180,"gray"),grey:new c(180,180,180,"grey"),lightskyblue:new c(135,
206,250,"lightskyblue"),lightsalmon:new c(255,160,122,"lightsalmon"),hotpink:new c(255,105,180,"hotpink")},F=/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/,f=/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;"undefined"!==typeof D&&(D.exports={makeColourSteps:I,makeGradient:v,dasColourForName:y})},{}],5:[function(l,D,x){function c(a,d,e,b){this.name=a;this.start=d;this.end=e;this.description=b}function k(a,d){var e;"string"==typeof a?(this.uri=a,e=d||{}):e=a||{};for(var b in e)this[b]=e[b];this.coords||
(this.coords=[]);this.props||(this.props={});(this.dasBaseURI=this.uri)&&"/"!=this.dasBaseURI.substr(this.uri.length-1)&&(this.dasBaseURI+="/")}function y(){}function I(a,d){return a.taxon==d.taxon&&a.auth==d.auth&&a.version==d.version}function v(a,d,e,b,p){this.name=a;this.start=d;this.end=e;this.alphabet=b;this.seq=p}function t(){}function F(a){a&&(this.id=a)}function f(a,d){this.desc=a;this.uri=d}function b(a){this.type=a;this.objects={};this.blocks=[]}function h(){this.styles=[]}function E(){}
function J(a,d){d=d||{};this.uri=a;this.opts=d}function K(a,d){var e=a.getElementsByTagName(d);if(0<e.length&&e[0].firstChild){e=e[0];if(1==e.childNodes.length)return e.firstChild.nodeValue;for(var b="",p=0;p<e.childNodes.length;++p)b+=e.childNodes[p].nodeValue;return b}return null}function B(a){for(var d=[],e=a.getElementsByTagName("LINK"),b=0;b<e.length;++b){var p=e[b];p.parentNode==a&&d.push(new f(p.firstChild?p.firstChild.nodeValue:"Unknown",p.getAttribute("href")))}return d}function w(a){var d=
[];a=a.getElementsByTagName("NOTE");for(var e=0;e<a.length;++e)a[e].firstChild&&d.push(a[e].firstChild.nodeValue);return d}function g(a,d,e,b){if(window.XDomainRequest){var p=new XDomainRequest;p.onload=function(){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;a.loadXML(p.responseText);d(a)};p.open("get",a);p.send("")}else try{var p=new XMLHttpRequest,f=setTimeout(function(){console.log("timing out "+a);p.abort();d(null,p)},5E3);p.timeout=5E3;p.ontimeout=function(){console.log("timeout on "+
a)};p.onreadystatechange=function(){4==p.readyState&&(clearTimeout(f),(200<=p.status||0==p.status)&&d(p.responseXML,p))};p.open("get",a,!0);e&&(p.withCredentials=!0);b&&p.setRequestHeader("X-DAS-Authorisation",b);p.overrideMimeType("text/xml");p.setRequestHeader("Accept","application/xml,*/*");p.send("")}catch(g){d(null,p,g)}}function M(a){a=(""+a).toLowerCase();return"yes"===a||"true"===a}function a(a){if(!a)return!1;a=(""+a).toLowerCase();return"no"!==a||"false"!==a}function d(a){var d=e(a);d.styles=
[];for(var b=0;b<a.styles.length;++b){var p=d.styles[b]=e(a.styles[b]);p._methodRE=p._labelRE=p._typeRE=void 0;p.style=e(p.style);p.style.id=void 0;p.style._gradient=void 0}return d}if("undefined"!==typeof l){x=l("./utils");var e=x.shallowCopy,p=x.pusho,q=l("./color").makeColourSteps}c.prototype.toString=function(){return this.name+":"+this.start+".."+this.end};c.prototype.isBounded=function(){return this.start&&this.end};c.prototype.toDASQuery=function(){var a="segment="+this.name;this.start&&this.end&&
(a+=":"+this.start+","+this.end);return a};k.prototype.getURI=function(a){return this.resolver?this.resolver(a).then(function(a){return"string"===typeof a?a:a.url}):Promise.resolve(a)};k.prototype.entryPoints=function(a){this.doCrossDomainRequest(this.dasBaseURI+"entry_points",function(d){if(!d)return a([]);var e=[];d=d.getElementsByTagName("SEGMENT");for(var b=0;b<d.length;++b){var p=d[b],f=p.getAttribute("id"),g=p.getAttribute("size"),q;g?(q=1,g|=0):((q=p.getAttribute("start"))&&(q|=0),(g=p.getAttribute("stop"))&&
(g|=0));var h=null;p.firstChild&&(h=p.firstChild.nodeValue);e.push(new c(f,q,g,h))}a(e)})};k.prototype.sequence=function(a,d){var e=this.dasBaseURI+"sequence?"+a.toDASQuery();this.doCrossDomainRequest(e,function(a){if(a){var e=[];a=a.getElementsByTagName("SEQUENCE");for(var b=0;b<a.length;++b){var p=a[b],n=p.getAttribute("id"),f=p.getAttribute("start"),g=p.getAttribute("stop"),m=null;if(p.firstChild)for(var p=p.firstChild.nodeValue,m="",q=0;;){var h=p.indexOf("\n",q);if(0<=h)m+=p.substring(q,h).toUpperCase(),
q=h+1;else{m+=p.substring(q).toUpperCase();break}}e.push(new v(n,f,g,"DNA",m))}d(e)}else d([])})};k.prototype.features=function(a,d,e){d=d||{};var p;if(this.features_uri)p=this.features_uri;else{var b=[];if(a)b.push(a.toDASQuery());else if(d.group)if(a=d.group,"string"==typeof a)b.push("group_id="+a);else for(var f=0;f<a.length;++f)b.push("group_id="+a[f]);if(d.adjacent)for(a=d.adjacent,"string"==typeof a&&(a=[a]),f=0;f<a.length;++f)b.push("adjacent="+a[f]);if(d.type)if("string"==typeof d.type)b.push("type="+
d.type);else for(a=0;a<d.type.length;++a)b.push("type="+d.type[a]);d.maxbins&&b.push("maxbins="+d.maxbins);0<b.length?p=this.dasBaseURI+"features?"+b.join(";"):e([],"No filters specified")}this.doCrossDomainRequest(p,function(a,d){if(a){for(var b=[],p={},n=a.getElementsByTagName("SEGMENT"),f=0;f<n.length;++f){var g=n[f],r=g.getAttribute("id");p[r]={min:g.getAttribute("start"),max:g.getAttribute("stop")};for(var g=g.getElementsByTagName("FEATURE"),q=0;q<g.length;++q){var u=g[q],h=new t;h.segment=r;
h.id=u.getAttribute("id");h.label=u.getAttribute("label");var C=K(u,"START"),z=K(u,"END");(C|0)>(z|0)?(h.min=z|0,h.max=C|0):(h.min=C|0,h.max=z|0);C=u.getElementsByTagName("TYPE");0<C.length&&(C=C[0],C.firstChild&&(h.type=C.firstChild.nodeValue),h.typeId=C.getAttribute("id"),h.typeCv=C.getAttribute("cvId"));h.type=K(u,"TYPE");!h.type&&h.typeId&&(h.type=h.typeId);h.method=K(u,"METHOD");(C=K(u,"ORIENTATION"))||(C="0");h.orientation=C;h.score=K(u,"SCORE");h.links=B(u);h.notes=w(u);C=u.getElementsByTagName("GROUP");
for(z=0;z<C.length;++z){var c=C[z],v=new F;v.type=c.getAttribute("type");v.id=c.getAttribute("id");v.links=B(c);v.notes=w(c);h.groups?h.groups.push(v):h.groups=Array(v)}if(h.notes)for(C=0;C<h.notes.length;++C)z=h.notes[C],0==z.indexOf("Genename=")&&(c=new F,c.type="gene",c.id=z.substring(9),h.groups?h.groups.push(c):h.groups=Array(c));C=u.getElementsByTagName("PART");if(0<C.length){c=[];for(z=0;z<C.length;++z)c.push(C[z].getAttribute("id"));h.parts=c}C=u.getElementsByTagName("PARENT");if(0<C.length){u=
[];for(z=0;z<C.length;++z)u.push(C[z].getAttribute("id"));h.parents=u}b.push(h)}}e(b,void 0,p)}else e([],"Failed request: "+(0==d.status?"server may not support CORS":"status="+d.status))},function(a){e([],a)})};k.prototype.alignments=function(a,d,e){var p=this.dasBaseURI+"alignment?query="+a;this.doCrossDomainRequest(p,function(a){if(a){var d=[];a=a.getElementsByTagName("alignment");for(var n=0;n<a.length;++n){for(var f=a[n],g=new b(f.getAttribute("alignType")),r=f.getElementsByTagName("alignObject"),
q=0;q<r.length;++q){var h=r[q],h={id:h.getAttribute("intObjectId"),accession:h.getAttribute("dbAccessionId"),version:h.getAttribute("objectVersion"),dbSource:h.getAttribute("dbSource"),dbVersion:h.getAttribute("dbVersion")};g.objects[h.id]=h}f=f.getElementsByTagName("block");for(r=0;r<f.length;++r){for(var h=f[r],q={order:h.getAttribute("blockOrder"),segments:[]},h=h.getElementsByTagName("segment"),c=0;c<h.length;++c){var t=h[c],t={object:t.getAttribute("intObjectId"),min:t.getAttribute("start"),
max:t.getAttribute("end"),strand:t.getAttribute("strand"),cigar:K(t,"cigar")};q.segments.push(t)}g.blocks.push(q)}d.push(g)}e(d)}else e([],"Failed request "+p)})};h.prototype.pushStyle=function(a,d,p){a||(a={type:"default"});a=e(a);d&&(a.zoom=d);a.style=p;this.styles.push(a)};k.prototype.stylesheet=function(a,d){var e,p=this.credentials;this.stylesheet_uri?(e=this.stylesheet_uri,p=!1):e=this.dasBaseURI+"stylesheet";this.getURI(e).then(function(e){g(e,function(e){if(e){var p=new h;e=e.getElementsByTagName("TYPE");
for(var b=0;b<e.length;++b){var f=e[b],g={};g.type=f.getAttribute("id");g.label=f.getAttribute("label");g.method=f.getAttribute("method");for(var f=f.getElementsByTagName("GLYPH"),m=0;m<f.length;++m){var u=f[m],C=u.getAttribute("zoom"),c;a:{if(u.hasChildNodes()){u=u.firstChild;do{if(u.nodeType==Node.ELEMENT_NODE){c=u;break a}u=u.nextSibling}while(null!=u)}c=null}u=new E;u.glyph=c.localName;for(c=c.firstChild;c;){if(c.nodeType==Node.ELEMENT_NODE)if("BGGRAD"==c.localName){var t=u,v=c.localName,w,k=
c;w=(w=k.getAttribute("steps"))?w|0:50;for(var B=[],l=[],k=k.getElementsByTagName("STOP"),F=0;F<k.length;++F){var J=k[F];B.push(1*J.getAttribute("score"));l.push(J.firstChild.nodeValue)}w=q(w,B,l);t[v]=w}else u[c.localName]=c.firstChild.nodeValue;c=c.nextSibling}p.pushStyle(g,C,u)}}a(p)}else d&&d()},p)}).catch(function(a){console.log(a);d()})};J.prototype.sources=function(a,d,e){e||(e={});var b=[];e.taxon&&b.push("organism="+e.taxon);e.auth&&b.push("authority="+e.auth);e.version&&b.push("version="+
e.version);e=this.uri;0<b.length&&(e=e+"?"+b.join("&"));g(e,function(e){if(!e&&d)d();else{var b=[];e=e.getElementsByTagName("SOURCE");for(var f=0;f<e.length;++f){var g=e[f],q=g.getElementsByTagName("VERSION");if(!(1>q.length)){for(var m=q[0],h=m.getElementsByTagName("COORDINATES"),q=[],C=0;C<h.length;++C){var c=h[C],t=new y;t.auth=c.getAttribute("authority");t.taxon=c.getAttribute("taxid");t.version=c.getAttribute("version");q.push(t)}for(var h=[],c=m.getElementsByTagName("CAPABILITY"),w,C=0;C<c.length;++C)t=
c[C],h.push(t.getAttribute("type")),"das1:features"==t.getAttribute("type")&&(w=t.getAttribute("query_uri"),w=w.substring(0,w.length-8));C={};m=m.getElementsByTagName("PROP");for(c=0;c<m.length;++c)p(C,m[c].getAttribute("name"),m[c].getAttribute("value"));w&&(g=new k(w,{source_uri:g.getAttribute("uri"),name:g.getAttribute("title"),desc:g.getAttribute("description"),coords:q,props:C,capabilities:h}),b.push(g))}}a(b)}})};k.prototype.doCrossDomainRequest=function(a,d,e){var b;this.xUser&&(b="Basic "+
btoa(this.xUser+":"+this.xPass));try{return g(a,d,this.credentials,b)}catch(p){if(e)e(p);else throw p;}};"undefined"!==typeof D&&(D.exports={DASGroup:F,DASFeature:t,DASStylesheet:h,DASStyle:E,DASSource:k,DASSegment:c,DASRegistry:J,DASSequence:v,DASLink:f,isDasBooleanTrue:M,isDasBooleanNotFalse:a,copyStylesheet:d,coordsMatch:I})},{"./color":4,"./utils":11}],6:[function(l,D,x){function c(c,t){0>c.indexOf("?")&&(c+="?soft=true");return new I(function(k,f){var b=new XMLHttpRequest;b.onreadystatechange=
function(){if(4==b.readyState)if(300<=b.status)f("Error code "+b.status);else{var h=JSON.parse(b.response);k(t?h:h.location)}};b.open("GET",c,!0);b.setRequestHeader("Accept","application/json");b.responseType="text";b.send("")})}function k(c){this.rawurl=c}function y(c,t,l,f){f||("object"===typeof t?(f=t,t=void 0):f={});this.url="string"===typeof c?new k(c):c;this.start=t||0;l&&(this.end=l);this.opts=f}if("undefined"!==typeof l)var I=l("es6-promise").Promise;k.prototype.getURLPromise=function(){this.urlPromise&&
this.urlPromiseValidity>Date.now()||(this.urlPromise=c(this.rawurl,!0).then(function(c){return c.location}),this.urlPromiseValidity=Date.now()+432E5);return this.urlPromise};y.prototype.slice=function(c,t){if(0>c)throw"Bad slice "+c;var k=this.start,f=this.end,k=k&&c?k+c:c||k;return new y(this.url,k,t&&k?k+t-1:f||t-1,this.opts)};y.prototype.fetchAsText=function(c){var t=this,k=new XMLHttpRequest;t.url.getURLPromise().then(function(f){k.open("GET",f,!0);if(t.end){if(1E8<t.end-t.start)throw"Monster fetch!";
k.setRequestHeader("Range","bytes="+t.start+"-"+t.end)}k.onreadystatechange=function(){if(4==k.readyState)return 200==k.status||206==k.status?c(k.responseText):c(null)};t.opts.credentials&&(k.withCredentials=!0);k.send("")}).catch(function(f){console.log(f);return c(null)})};y.prototype.salted=function(){return this};y.prototype.fetch=function(c,t,k){var f=this;t=t||1;if(3<t)return c(null);f.url.getURLPromise().then(function(b){var h=new XMLHttpRequest,l;h.open("GET",b,!0);h.overrideMimeType("text/plain; charset=x-user-defined");
if(f.end){if(1E8<f.end-f.start)throw"Monster fetch!";h.setRequestHeader("Range","bytes="+f.start+"-"+f.end);l=f.end-f.start+1}h.responseType="arraybuffer";h.onreadystatechange=function(){if(4==h.readyState){if(200==h.status||206==h.status){if(h.response){var b=h.response.byteLength;return!l||l==b||k&&b==k?c(h.response):f.fetch(c,t+1,b)}if(h.mozResponseArrayBuffer)return c(h.mozResponseArrayBuffer);b=h.responseText;if(!l||l==b.length||k&&b.length==k){if(b=h.responseText){for(var y=new Uint8Array(b.length),
B=0;B<y.length;++B)y[B]=b.charCodeAt(B);b=y.buffer}else b=null;return c(b)}return f.fetch(c,t+1,b.length)}return f.fetch(c,t+1)}};f.opts.credentials&&(h.withCredentials=!0);h.send("")}).catch(function(b){console.log(b)})};"undefined"!==typeof D&&(D.exports={lookupEncodeURI:c,EncodeFetchable:y})},{"es6-promise":12}],7:[function(l,D,x){(function(c){function k(b){this.bam=b}function y(b){this.bbi=b}function x(b){return function(f){var g=newID();return new h(function(h,a){J[g]={resolve:h,reject:a};postMessage({tag:g,
cmd:"resolve",resolver:b,url:f})})}}var v=l("./bin"),t=l("./bam"),F=l("./bigwig"),f=l("./encode"),b=l("./utils"),h=l("es6-promise").Promise,E={},J={},D=0;c.newID=function(){return"cn"+ ++D};postMessage({tag:"init"});self.onmessage=function(h){var c=h.data,g=h.data.command,l=h.data.tag;if(g)if("connectBAM"===g){var a=newID(),d;c.resolver&&(d=x(c.resolver));var e;c.blob?(h=new v.BlobFetchable(c.blob),d=new v.BlobFetchable(c.indexBlob)):(h=new v.URLFetchable(c.uri,{credentials:c.credentials,resolver:d}),
d=new v.URLFetchable(c.indexUri,{credentials:c.credentials,resolver:d}),e=c.indexChunks);t.makeBam(h,d,e,function(d,e){d?(E[a]=new k(d),postMessage({tag:l,result:a})):postMessage({tag:l,error:e||"Couldn't fetch BAM"})})}else if("connectBBI"===g)a=newID(),c.resolver&&(d=x(c.resolver)),e=c.blob?new v.BlobFetchable(c.blob):"encode"==c.transport?new f.EncodeFetchable(c.uri,{credentials:c.credentials}):new v.URLFetchable(c.uri,{credentials:c.credentials,resolver:d}),F.makeBwg(e,function(d,e){d?(E[a]=new y(d),
postMessage({tag:l,result:a})):postMessage({tag:l,error:e||"Couldn't fetch BBI"})},c.uri);else if("textxhr"===g)b.textXHR(c.uri,function(a,d){a?postMessage({tag:l,result:a}):postMessage({tag:l,err:d||"Couldn't fetch resource"})});else if("fetch"===g){e=E[h.data.connection];if(!e)return postMessage({tag:l,error:"No such connection: "+h.data.connection});e.fetch(c.tag,c.chr,c.min,c.max,c.zoom,c.opts)}else if("leap"===g){e=E[h.data.connection];if(!e)return postMessage({tag:l,error:"No such connection: "+
h.data.connection});e.leap(c.tag,c.chr,c.pos,c.dir)}else if("quantLeap"===g){e=E[h.data.connection];if(!e)return postMessage({tag:l,error:"No such connection: "+h.data.connection});e.quantLeap(c.tag,c.chr,c.pos,c.dir,c.threshold,c.under)}else if("meta"===g){e=E[h.data.connection];if(!e)return postMessage({tag:l,error:"No such connection: "+h.data.connection});e.meta(c.tag)}else if("search"===g){e=E[h.data.connection];if(!e)return postMessage({tag:l,error:"No such connection: "+h.data.connection});
e.search(c.tag,c.query,c.index)}else{if("date"===g)return postMessage({tag:l,result:Date.now()|0});postMessage({tag:l,error:"Bad command "+g})}else if(e=J[l])c.err?e.reject(c.err):e.resolve(c.url),delete J[l]};k.prototype.fetch=function(b,f,g,c,a,d){d=d||{};this.bam.fetch(f,g,c,function(a,d){a?postMessage({tag:b,result:a,time:Date.now()|0}):postMessage({tag:b,error:d})},d)};y.prototype.fetch=function(b,f,g,c,a){"number"!==typeof a&&(a=-1);(0>a?this.bbi.getUnzoomedView():this.bbi.getZoomedView(a)).readWigData(f,
g,c,function(a){postMessage({tag:b,result:a})})};y.prototype.meta=function(b){for(var f=[1],g=0;g<this.bbi.zoomLevels.length;++g)f.push(this.bbi.zoomLevels[g].reduction);var c=this,a={type:this.bbi.type,zoomLevels:f,fieldCount:this.bbi.fieldCount,definedFieldCount:this.bbi.definedFieldCount,schema:this.bbi.schema};"bigbed"===this.bbi.type?this.bbi.getExtraIndices(function(d){d&&(c.extraIndices=d,a.extraIndices=d.map(function(a){return a.field}));postMessage({tag:b,result:a})}):postMessage({tag:b,
result:a})};y.prototype.leap=function(b,f,g,c){this.bbi.getUnzoomedView().getFirstAdjacent(f,g,c,function(a,d){postMessage({tag:b,result:a,error:d})})};y.prototype.quantLeap=function(b,f,g,c,a,d){this.bbi.thresholdSearch(f,g,c,a,function(a,d){postMessage({tag:b,result:a,error:d})})};y.prototype.search=function(b,f,g){this.extraIndices[0].lookup(f,function(f,a){postMessage({tag:b,result:f,error:a})})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bam":1,"./bigwig":2,
"./bin":3,"./encode":6,"./utils":11,"es6-promise":12}],8:[function(l,D,x){function c(b,f){this.block=b;this.offset=f}function k(b,f,t){var k=4294967296*(b[f+6]&255)+16777216*(b[f+5]&255)+65536*(b[f+4]&255)+256*(b[f+3]&255)+(b[f+2]&255);b=b[f+1]<<8|b[f];return 0!=k||0!=b||t?new c(k,b):null}function y(b,c){c=Math.min(c||1,b.byteLength-50);for(var t=[],k=[0],l=0;k[0]<c;){var v=new Uint8Array(b,k[0],12),v=v[11]<<8|v[10],v=F(b,12+v+k[0],Math.min(65536,b.byteLength-12-v-k[0]),k);k[0]+=8;l+=v.byteLength;
t.push(v)}if(1==t.length)return t[0];k=new Uint8Array(l);for(v=l=0;v<t.length;++v){var w=new Uint8Array(t[v]);f(w,0,k,l,w.length);l+=w.length}return k.buffer}function I(b,f){this.minv=b;this.maxv=f}function v(b,f){--f;return b>>14==f>>14?4681+(b>>14):b>>17==f>>17?585+(b>>17):b>>20==f>>20?73+(b>>20):b>>23==f>>23?9+(b>>23):b>>26==f>>26?1+(b>>26):0}function t(b,f){var c,t=[];--f;t.push(0);for(c=1+(b>>26);c<=1+(f>>26);++c)t.push(c);for(c=9+(b>>23);c<=9+(f>>23);++c)t.push(c);for(c=73+(b>>20);c<=73+(f>>
20);++c)t.push(c);for(c=585+(b>>17);c<=585+(f>>17);++c)t.push(c);for(c=4681+(b>>14);c<=4681+(f>>14);++c)t.push(c);return t}if("undefined"!==typeof l){l=l("jszlib");var F=l.inflateBuffer,f=l.arrayCopy}c.prototype.toString=function(){return""+this.block+":"+this.offset};"undefined"!==typeof D&&(D.exports={unbgzf:y,readVob:k,reg2bin:v,reg2bins:t,Chunk:I})},{jszlib:24}],9:[function(l,D,x){function c(c){c=y(I(c));for(var k="",f,b=0;b<c.length;b++)f=c.charCodeAt(b),k+="0123456789abcdef".charAt(f>>>4&15)+
"0123456789abcdef".charAt(f&15);return k}function k(c){c=y(I(c));for(var k="",f=c.length,b=0;b<f;b+=3)for(var h=c.charCodeAt(b)<<16|(b+1<f?c.charCodeAt(b+1)<<8:0)|(b+2<f?c.charCodeAt(b+2):0),l=0;4>l;l++)k=8*b+6*l>8*c.length?k+"":k+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-l)&63);return k}function y(c){for(var k=Array(c.length>>2),f=0;f<k.length;f++)k[f]=0;for(f=0;f<8*c.length;f+=8)k[f>>5]|=(c.charCodeAt(f/8)&255)<<24-f%32;c=8*c.length;k[c>>5]|=128<<24-c%32;
k[(c+64>>9<<4)+15]=c;c=Array(80);for(var f=1732584193,b=-271733879,h=-1732584194,l=271733878,y=-1009589776,x=0;x<k.length;x+=16){for(var B=f,w=b,g=h,D=l,a=y,d=0;80>d;d++){if(16>d)c[d]=k[x+d];else{var e=c[d-3]^c[d-8]^c[d-14]^c[d-16];c[d]=e<<1|e>>>31}var e=f<<5|f>>>27,p;p=20>d?b&h|~b&l:40>d?b^h^l:60>d?b&h|b&l|h&l:b^h^l;e=v(v(e,p),v(v(y,c[d]),20>d?1518500249:40>d?1859775393:60>d?-1894007588:-899497514));y=l;l=h;h=b<<30|b>>>2;b=f;f=e}f=v(f,B);b=v(b,w);h=v(h,g);l=v(l,D);y=v(y,a)}k=[f,b,h,l,y];c="";for(f=
0;f<32*k.length;f+=8)c+=String.fromCharCode(k[f>>5]>>>24-f%32&255);return c}function I(c){for(var k="",f=-1,b,h;++f<c.length;)b=c.charCodeAt(f),h=f+1<c.length?c.charCodeAt(f+1):0,55296<=b&&56319>=b&&56320<=h&&57343>=h&&(b=65536+((b&1023)<<10)+(h&1023),f++),127>=b?k+=String.fromCharCode(b):2047>=b?k+=String.fromCharCode(192|b>>>6&31,128|b&63):65535>=b?k+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|b&63):2097151>=b&&(k+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|b&63));return k}
function v(c,k){var f=(c&65535)+(k&65535);return(c>>16)+(k>>16)+(f>>16)<<16|f&65535}"undefined"!==typeof D&&(D.exports={b64_sha1:k,hex_sha1:c})},{}],10:[function(l,D,x){function c(f,b){if("number"!=typeof f||"number"!=typeof b)throw"Bad range "+f+","+b;this._min=f;this._max=b}function k(f){f=f.sort(F);var b=[],c=f.shift();f.forEach(function(f){f._min<=c._max?f._max>c._max&&(c._max=f._max):(b.push(c),c=f)});b.push(c);this._ranges=b}function y(f,b){f instanceof k||(f instanceof Array||(f=[f]),f=new k(f));
b&&f.insertRange(b);return f}function I(f,b){for(var h=f.ranges(),l=b.ranges(),t=h.length,v=l.length,y=0,w=0,g=[];y<t&&w<v;){f=h[y];b=l[w];var x=Math.max(f.min(),b.min()),a=Math.min(f.max(),b.max());a>=x&&g.push(new c(x,a));f.max()>b.max()?++w:++y}return 0==g.length?null:1==g.length?g[0]:new k(g)}function v(f){var b=0;f=f.ranges();for(var c=0;c<f.length;++c)var k=f[c],b=b+(k.max()-k.min()+1);return b}function t(f,b){return f.min()<b.min()?-1:f.min()>b.min()?1:f.max()<b.max()?-1:b.max()>f.max()?1:
0}function F(f,b){return f._min<b._min?-1:f._min>b._min?1:f._max<b._max?-1:b._max>f._max?1:0}c.prototype.min=function(){return this._min};c.prototype.max=function(){return this._max};c.prototype.contains=function(f){return f>=this._min&&f<=this._max};c.prototype.isContiguous=function(){return!0};c.prototype.ranges=function(){return[this]};c.prototype._pushRanges=function(f){f.push(this)};c.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"};k.prototype.min=function(){return this._ranges[0].min()};
k.prototype.max=function(){return this._ranges[this._ranges.length-1].max()};k.prototype.lower_bound=function(f){var b=this.ranges();if(f>this.max())return b.length;if(f<this.min())return 0;for(var c=0,k=b.length-1;c<=k;){var l=Math.floor((c+k)/2);if(f>b[l]._max)c=l+1;else if(f<b[l]._min)k=l-1;else return l}return c};k.prototype.contains=function(f){var b=this.lower_bound(f);return b<this._ranges.length&&this._ranges[b].contains(f)?!0:!1};k.prototype.insertRange=function(f){var b=this.lower_bound(f._min);
if(b===this._ranges.length)this._ranges.push(f);else{var c=this.ranges();if(f._max<c[b]._min)this._ranges.splice(b,0,f);else{c[b]._min<f._min&&(f._min=c[b]._min);for(var k=b+1;k<c.length&&c[k]._min<=f._max;)k++;k--;c[k]._max>f._max&&(f._max=c[k]._max);this._ranges.splice(b,k-b+1,f)}}};k.prototype.isContiguous=function(){return 1<this._ranges.length};k.prototype.ranges=function(){return this._ranges};k.prototype._pushRanges=function(f){for(var b=0;b<this._ranges.length;++b)f.push(this._ranges[b])};
k.prototype.toString=function(){for(var f="",b=0;b<this._ranges.length;++b)0<b&&(f+=","),f+=this._ranges[b].toString();return f};"undefined"!==typeof D&&(D.exports={Range:c,union:y,intersection:I,coverage:v,rangeOver:t,_rangeOrder:F})},{}],11:[function(l,D,x){function c(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function k(a,e,b){a[e]?a[e].push(b):a[e]=[b]}function y(a,e,b){var f=a[e];if(f){for(a=0;a<f.length;++a)if(f[a]==b)return;f.push(b)}else a[e]=[b]}function I(a,e,b,f){if(a)return a;
if(e)return e;if(b)return b;if(f)return f}function c(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function v(a,e){if(!a)return-1;for(var b=0;b<a.length;++b)if(a[b]===e)return b;return-1}function t(a,e,b,f){a=document.createElement(a);if(e){e instanceof Array||(e=[e]);for(var c=0;c<e.length;++c){var g=e[c];g&&("string"==typeof g?g=document.createTextNode(g):"number"==typeof g&&(g=document.createTextNode(""+g)),a.appendChild(g))}}if(b)for(var m in b)try{a[m]=b[m]}catch(k){throw console.log("error setting "+
m),k;}if(f)for(m in f)a.style[m]=f[m];return a}function F(a,e,b,f){a=document.createElementNS(a,e);if(b)for(b instanceof Array||(b=[b]),e=0;e<b.length;++e){var c=b[e];"string"==typeof c&&(c=document.createTextNode(c));a.appendChild(c)}if(f)for(var g in f){b=a;e=g;var c=f[g],m=M[e];if(!m){for(var m="",k=0;k<e.length;++k)var u=e.substring(k,k+1),h=u.toLowerCase(),m=h!=u?m+"-"+h:m+u;M[e]=m}b.setAttribute(m,c)}return a}function f(a){if(a&&a.childNodes)for(;0<a.childNodes.length;)a.removeChild(a.firstChild)}
function b(a,e){if("undefined"===typeof a)return"undefined";if(null==a)return"null";if("string"==typeof a)return"'"+a+"'";if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array){for(var f=null,c=0;c<a.length;++c)f=(null==f?"":f+", ")+b(a[c],e);return"["+(f?f:"")+"]"}e=e||{};f=null;for(c in a)e[c]||void 0!=c&&"function"!=typeof a[c]&&(f=(null==f?"":f+", ")+c+": "+b(a[c],e));return"{"+(f?f:"")+"}"}return typeof a}function h(a){var e={},b;for(b in a)e[b]=a[b];
return e}function E(a){this.value=a;this.listeners=[]}function J(){this.queue=[]}function K(d,e,b){b&&b.salt&&(d=d+"?salt="+g(""+Date.now()+","+ ++a));try{var f;b.timeout&&(f=setTimeout(function(){console.log("timing out "+d);c.abort();return e(null,"Timeout")},b.timeout));var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&(f&&clearTimeout(f),200>c.status||300<=c.status?e(null,"Error code "+c.status):e(c.responseText))};c.open("GET",d,!0);c.responseType="text";b&&b.credentials&&
(c.withCredentials=!0);c.send("")}catch(r){e(null,"Exception "+r)}}function B(a,e){if(0==e.indexOf("http:")||0==e.indexOf("https:"))return e;var b=a.lastIndexOf("/");return 0<=b?a.substr(0,b+1)+e:e}function w(a){return t("a",null,{href:a}).href}if("undefined"!==typeof l)var g=l("./sha1").b64_sha1;var M={};E.prototype.addListener=function(a){this.listeners.push(a)};E.prototype.addListenerAndFire=function(a){this.listeners.push(a);a(this.value)};E.prototype.removeListener=function(a){var e=this.listeners;
a=v(e,a);0<=a&&e.splice(a,1)};E.prototype.get=function(){return this.value};E.prototype.set=function(a){this.value=a;for(var e=0;e<this.listeners.length;++e)this.listeners[e](a)};J.prototype.provide=function(a){if(void 0!==this.res)throw"Resource has already been provided.";this.res=a;for(var e=0;e<this.queue.length;++e)this.queue[e](a);this.queue=null};J.prototype.await=function(a){if(void 0!==this.res)return a(this.res),this.res;this.queue.push(a)};var a=0;l={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",
CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"};"trim"in String.prototype||(String.prototype.trim=
function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"undefined"!==typeof D&&(D.exports={textXHR:K,relativeURL:B,resolveUrlToPage:w,shallowCopy:h,pusho:k,pushnew:c,pushnewo:y,arrayIndexOf:v,pick:I,makeElement:t,makeElementNS:F,removeChildren:f,miniJSONify:b,Observed:E,Awaited:J,AMINO_ACID_TRANSLATION:l})},{"./sha1":9}],12:[function(l,D,x){D=l("./promise/promise").Promise;l=l("./promise/polyfill").polyfill;x.Promise=D;x.polyfill=l},{"./promise/polyfill":17,"./promise/promise":18}],13:[function(l,
D,x){var c=l("./utils").isArray,k=l("./utils").isFunction;x.all=function(l){if(!c(l))throw new TypeError("You must pass an array to all.");return new this(function(c,v){function t(b){return function(k){x[b]=k;0===--f&&c(x)}}var x=[],f=l.length,b;0===f&&c([]);for(var h=0;h<l.length;h++)(b=l[h])&&k(b.then)?b.then(t(h),v):(x[h]=b,0===--f&&c(x))})}},{"./utils":22}],14:[function(l,D,x){(function(c,k){function l(){return function(){c.nextTick(t)}}function D(){var b=0,c=new f(t),k=document.createTextNode("");
c.observe(k,{characterData:!0});return function(){k.data=b=++b%2}}function v(){return function(){b.setTimeout(t,1)}}function t(){for(var b=0;b<h.length;b++){var f=h[b];(0,f[0])(f[1])}h=[]}var F="undefined"!==typeof window?window:{},f=F.MutationObserver||F.WebKitMutationObserver,b="undefined"!==typeof k?k:void 0===this?window:this,h=[],E;E="undefined"!==typeof c&&"[object process]"==={}.toString.call(c)?l():f?D():v();x.asap=function(b,f){1===h.push([b,f])&&E()}}).call(this,l("1YiZ5S"),"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"1YiZ5S":23}],15:[function(l,D,x){x.cast=function(c){return c&&"object"===typeof c&&c.constructor===this?c:new this(function(k){k(c)})}},{}],16:[function(l,D,x){var c={instrument:!1};x.config=c;x.configure=function(k,l){if(2===arguments.length)c[k]=l;else return c[k]}},{}],17:[function(l,D,x){(function(c){var k=l("./promise").Promise,y=l("./utils").isFunction;x.polyfill=function(){var l;l="undefined"!==typeof c?c:"undefined"!==typeof window&&
window.document?window:self;"Promise"in l&&"cast"in l.Promise&&"resolve"in l.Promise&&"reject"in l.Promise&&"all"in l.Promise&&"race"in l.Promise&&function(){var c;new l.Promise(function(k){c=k});return y(c)}()||(l.Promise=k)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./promise":18,"./utils":22}],18:[function(l,D,x){function c(a){if(!B(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof
c))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[];k(a,this)}function k(a,d){function e(a){F(d,a)}function f(a){b(d,a)}try{a(e,f)}catch(c){f(c)}}function y(a,d,e,f){var c=B(e),g,k,h,l;if(c)try{g=e(f),h=!0}catch(v){l=!0,k=v}else g=f,h=!0;t(d,g)||(c&&h?F(d,g):l?b(d,k):a===p?F(d,g):a===q&&b(d,g))}function I(a,d,e,b){a=a._subscribers;var f=a.length;a[f]=d;a[f+p]=e;a[f+q]=b}function v(a,d){for(var e,
b,f=a._subscribers,c=a._detail,p=0;p<f.length;p+=3)e=f[p],b=f[p+d],y(d,e,b,c);a._subscribers=null}function t(a,d){var e=null,c;try{if(a===d)throw new TypeError("A promises callback cannot return that same promise.");if(K(d)&&(e=d.then,B(e)))return e.call(d,function(e){if(c)return!0;c=!0;d!==e?F(a,e):f(a,e)},function(d){if(c)return!0;c=!0;b(a,d)}),!0}catch(p){if(c)return!0;b(a,p);return!0}return!1}function F(a,d){a===d?f(a,d):t(a,d)||f(a,d)}function f(a,b){a._state===d&&(a._state=e,a._detail=b,J.async(h,
a))}function b(a,b){a._state===d&&(a._state=e,a._detail=b,J.async(E,a))}function h(a){v(a,a._state=p)}function E(a){v(a,a._state=q)}var J=l("./config").config;l("./config");var K=l("./utils").objectOrFunction,B=l("./utils").isFunction;l("./utils");D=l("./cast").cast;var w=l("./all").all,g=l("./race").race,M=l("./resolve").resolve,a=l("./reject").reject;l=l("./asap").asap;J.async=l;var d=void 0,e=0,p=1,q=2;c.prototype={constructor:c,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,
d){var e=this,b=new this.constructor(function(){});if(this._state){var f=arguments;J.async(function(){y(e._state,b,f[e._state-1],e._detail)})}else I(this,b,a,d);return b},"catch":function(a){return this.then(null,a)}};c.all=w;c.cast=D;c.race=g;c.resolve=M;c.reject=a;x.Promise=c},{"./all":13,"./asap":14,"./cast":15,"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(l,D,x){var c=l("./utils").isArray;x.race=function(k){if(!c(k))throw new TypeError("You must pass an array to race.");
return new this(function(c,l){for(var v,t=0;t<k.length;t++)(v=k[t])&&"function"===typeof v.then?v.then(c,l):c(v)})}},{"./utils":22}],20:[function(l,D,x){x.reject=function(c){return new this(function(k,l){l(c)})}},{}],21:[function(l,D,x){x.resolve=function(c){return new this(function(k,l){k(c)})}},{}],22:[function(l,D,x){function c(c){return"function"===typeof c}l=Date.now||function(){return(new Date).getTime()};x.objectOrFunction=function(k){return c(k)||"object"===typeof k&&null!==k};x.isFunction=
c;x.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)};x.now=l},{}],23:[function(l,D,x){function c(){}l=D.exports={};l.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(c){return window.setImmediate(c)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var c=[];window.addEventListener("message",function(l){var x=l.source;x!==window&&null!==x||"process-tick"!==l.data||(l.stopPropagation(),0<c.length&&c.shift()())},
!0);return function(l){c.push(l);window.postMessage("process-tick","*")}}return function(c){setTimeout(c,0)}}();l.title="browser";l.browser=!0;l.env={};l.argv=[];l.on=c;l.addListener=c;l.once=c;l.off=c;l.removeListener=c;l.removeAllListeners=c;l.emit=c;l.binding=function(c){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(c){throw Error("process.chdir is not supported");}},{}],24:[function(l,D,x){function c(){}function k(){this.was=[0]}function y(a,d,
e){this.hufts=new Int32Array(4320);this.window=new Uint8Array(e);this.end=e;this.checkfn=d;this.mode=0;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new I;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new v}function I(){}function v(){}function t(a,d,e,b,f){if(0!=f){if(!a)throw"Undef src";if(!e)throw"Undef dest";if(0==d&&f==a.length)e.set(a,b);else if(M)a=a.subarray(d,d+f),e.set(a,b);
else if(1==a.BYTES_PER_ELEMENT&&100<f)a=new Uint8Array(a.buffer,a.byteOffset+d,f),e.set(a,b);else for(var c=0;c<f;++c)e[b+c]=a[d+c]}}function F(a,d,e,b){a=d?e?new Uint8Array(a,d,e):new Uint8Array(a,d,a.byteLength-d):new Uint8Array(a);e=new c;e.inflateInit(15,!0);e.next_in=a;e.next_in_index=0;e.avail_in=a.length;a=[];for(var f=0;;){var g=new Uint8Array(32E3);e.next_out=g;e.next_out_index=0;e.avail_out=g.length;var r=e.inflate(0);if(0!=r&&1!=r&&-5!=r)throw e.msg;if(0!=e.avail_out){var m=new Uint8Array(g.length-
e.avail_out);t(g,0,m,0,g.length-e.avail_out);g=m}a.push(g);f+=g.length;if(1==r||-5==r)break}b&&(b[0]=(d||0)+e.next_in_index);if(1==a.length)return a[0].buffer;d=new Uint8Array(f);for(e=b=0;e<a.length;++e)f=a[e],t(f,0,d,b,f.length),b+=f.length;return d.buffer}var f=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],b=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,
0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,
19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,
0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,
139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,
80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,
22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,
0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,
207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],h=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],E=[3,4,5,6,7,8,9,10,11,13,
15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];c.prototype.inflateInit=function(a,d){a||(a=15);d&&(d=!1);this.istate=new k;return this.istate.inflateInit(this,d?-a:a)};c.prototype.inflate=function(a){return null==this.istate?
-2:this.istate.inflate(this,a)};c.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=istate.inflateEnd(this);this.istate=null;return a};c.prototype.inflateSync=function(){return istate.inflateSync(this)};c.prototype.inflateSetDictionary=function(a,d){return istate.inflateSetDictionary(this,a,d)};k.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};k.prototype.inflateEnd=
function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};k.prototype.inflateInit=function(a,d){this.blocks=a.msg=null;nowrap=0;0>d&&(d=-d,nowrap=1);if(8>d||15<d)return this.inflateEnd(a),-2;this.wbits=d;a.istate.blocks=new y(a,0!=a.istate.nowrap?null:this,1<<d);this.inflateReset(a);return 0};k.prototype.inflate=function(a,d){var e,b;if(null==a||null==a.istate||null==a.next_in)return-2;d=4==d?-5:0;for(e=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return e;e=d;a.avail_in--;
a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;b=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+b)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(b&32)){a.istate.mode=
7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return e;a.avail_in--;a.total_in++;
a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,a.msg="need dictionary",a.istate.marker=0,-2;case 7:e=a.istate.blocks.proc(a,e);if(-3==e){a.istate.mode=13;a.istate.marker=0;break}0==e&&(e=d);if(1!=e)return e;e=d;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<
24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return e;e=d;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";
a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};k.prototype.inflateSetDictionary=function(a,d,e){var b=0,f=e;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(a._adler.adler32(1,d,0,e)!=a.adler)return-3;a.adler=a._adler.adler32(0,null,0,0);f>=1<<a.istate.wbits&&(f=(1<<a.istate.wbits)-1,b=e-f);a.istate.blocks.set_dictionary(d,b,f);a.istate.mode=7;return 0};var w=[0,0,255,255];k.prototype.inflateSync=function(a){var d,e,b;if(null==a||null==a.istate)return-2;
13!=a.istate.mode&&(a.istate.mode=13,a.istate.marker=0);if(0==(d=a.avail_in))return-5;e=a.next_in_index;for(b=a.istate.marker;0!=d&&4>b;)a.next_in[e]==w[b]?b++:b=0!=a.next_in[e]?0:4-b,e++,d--;a.total_in+=e-a.next_in_index;a.next_in_index=e;a.avail_in=d;a.istate.marker=b;if(4!=b)return-3;d=a.total_in;e=a.total_out;this.inflateReset(a);a.total_in=d;a.total_out=e;a.istate.mode=7;return 0};k.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};
var g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];y.prototype.reset=function(a,d){d&&(d[0]=this.check);6==this.mode&&this.codes.free(a);this.read=this.write=this.bitb=this.bitk=this.mode=0;this.checkfn&&(a.adler=this.check=a._adler.adler32(0,null,0,0))};y.prototype.proc=function(a,d){var e,c,q,n,r,m,k;n=a.next_in_index;r=a.avail_in;c=this.bitb;q=this.bitk;m=this.write;for(k=m<this.read?this.read-m-1:this.end-m;;)switch(this.mode){case 0:for(;3>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=
q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}e=c&7;this.last=e&1;switch(e>>>1){case 0:c>>>=3;q-=3;e=q&7;c>>>=e;q-=e;this.mode=1;break;case 1:var u=new Int32Array(1),l=new Int32Array(1),v=[],A=[];e=l;var w=v,x=A;u[0]=9;e[0]=5;w[0]=b;x[0]=h;this.codes.init(u[0],l[0],v[0],0,A[0],0,a);c>>>=3;q-=3;this.mode=6;break;case 2:c>>>=3;q-=3;this.mode=3;break;case 3:return c>>>=3,q-=3,this.mode=13,a.msg="invalid block type",
d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d)}break;case 1:for(;32>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}if((~c>>>16&65535)!=(c&65535))return this.mode=13,a.msg="invalid stored block lengths",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=
n,this.write=m,this.inflate_flush(a,d);this.left=c&65535;c=q=0;this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==r)return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,write=m,this.inflate_flush(a,d);if(0==k&&(m==end&&0!=read&&(m=0,k=m<this.read?this.read-m-1:this.end-m),0==k&&(this.write=m,d=this.inflate_flush(a,d),m=this.write,k=m<this.read?this.read-m-1:this.end-m,m==this.end&&0!=this.read&&(m=0,k=m<this.read?this.read-m-1:this.end-m),0==k)))return this.bitb=
c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);d=0;e=this.left;e>r&&(e=r);e>k&&(e=k);t(a.next_in,n,this.window,m,e);n+=e;r-=e;m+=e;k-=e;if(0!=(this.left-=e))break;this.mode=0!=this.last?7:0;break;case 3:for(;14>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}this.table=e=c&16383;if(29<(e&31)||29<(e>>
5&31))return this.mode=9,a.msg="too many length or distance symbols",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);e=258+(e&31)+(e>>5&31);if(null==this.blens||this.blens.length<e)this.blens=new Int32Array(e);else for(k=0;k<e;k++)this.blens[k]=0;c>>>=14;q-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>q;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,
a.next_in_index=n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}this.blens[g[this.index++]]=c&7;c>>>=3;q-=3}for(;19>this.index;)this.blens[g[this.index++]]=0;this.bb[0]=7;e=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,a);if(0!=e)return d=e,-3==d&&(this.blens=null,this.mode=9),this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,write=m,this.inflate_flush(a,d);this.index=0;this.mode=5;case 5:for(;;){e=this.table;if(!(this.index<
258+(e&31)+(e>>5&31)))break;for(e=this.bb[0];q<e;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}e=this.hufts[3*(this.tb[0]+(c&f[e]))+1];l=this.hufts[3*(this.tb[0]+(c&f[e]))+2];if(16>l)c>>>=e,q-=e,this.blens[this.index++]=l;else{k=18==l?7:l-14;for(u=18==l?11:3;q<e+k;){if(0!=r)d=0;else return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=
n,this.write=m,this.inflate_flush(a,d);r--;c|=(a.next_in[n++]&255)<<q;q+=8}c>>>=e;q-=e;u+=c&f[k];c>>>=k;q-=k;k=this.index;e=this.table;if(k+u>258+(e&31)+(e>>5&31)||16==l&&1>k)return this.blens=null,this.mode=9,a.msg="invalid bit length repeat",d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);l=16==l?this.blens[k-1]:0;do this.blens[k++]=l;while(0!=--u);this.index=k}}this.tb[0]=-1;u=new Int32Array(1);l=new Int32Array(1);v=
new Int32Array(1);A=new Int32Array(1);u[0]=9;l[0]=6;e=this.table;e=this.inftree.inflate_trees_dynamic(257+(e&31),1+(e>>5&31),this.blens,u,l,v,A,this.hufts,a);if(0!=e)return-3==e&&(this.blens=null,this.mode=13),d=e,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);this.codes.init(u[0],l[0],this.hufts,v[0],this.hufts,A[0],a);this.mode=6;case 6:this.bitb=c;this.bitk=q;a.avail_in=r;a.total_in+=n-a.next_in_index;a.next_in_index=n;
this.write=m;if(1!=(d=this.codes.proc(this,a,d)))return this.inflate_flush(a,d);d=0;this.codes.free(a);n=a.next_in_index;r=a.avail_in;c=this.bitb;q=this.bitk;m=this.write;k=m<this.read?this.read-m-1:this.end-m;if(0==this.last){this.mode=0;break}this.mode=7;case 7:this.write=m;d=this.inflate_flush(a,d);m=this.write;if(this.read!=this.write)return this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);mode=12;case 8:return d=1,this.bitb=
c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);case 9:return d=-3,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d);default:return d=-2,this.bitb=c,this.bitk=q,a.avail_in=r,a.total_in+=n-a.next_in_index,a.next_in_index=n,this.write=m,this.inflate_flush(a,d)}};y.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};y.prototype.set_dictionary=
function(a,d,e){t(a,d,window,0,e);this.read=this.write=e};y.prototype.sync_point=function(){return 1==this.mode};y.prototype.inflate_flush=function(a,d){var e,b,c;b=a.next_out_index;c=this.read;e=(c<=this.write?this.write:this.end)-c;e>a.avail_out&&(e=a.avail_out);0!=e&&-5==d&&(d=0);a.avail_out-=e;a.total_out+=e;null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,c,e));t(this.window,c,a.next_out,b,e);b+=e;c+=e;c==this.end&&(c=0,this.write==this.end&&(this.write=0),e=this.write-
c,e>a.avail_out&&(e=a.avail_out),0!=e&&-5==d&&(d=0),a.avail_out-=e,a.total_out+=e,null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,c,e)),t(this.window,c,a.next_out,b,e),b+=e,c+=e);a.next_out_index=b;this.read=c;return d};I.prototype.init=function(a,d,b,c,f,g,k){this.mode=0;this.lbits=a;this.dbits=d;this.ltree=b;this.ltree_index=c;this.dtree=f;this.dtree_index=g;this.tree=null};I.prototype.proc=function(a,d,b){var c,g,n=0,k=0,m=0,l,h,t,m=d.next_in_index;l=d.avail_in;
n=a.bitb;k=a.bitk;h=a.write;for(t=h<a.read?a.read-h-1:a.end-h;;)switch(this.mode){case 0:if(258<=t&&10<=l&&(a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,b=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,a,d),m=d.next_in_index,l=d.avail_in,n=a.bitb,k=a.bitk,h=a.write,t=h<a.read?a.read-h-1:a.end-h,0!=b)){this.mode=1==b?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=
1;case 1:for(c=this.need;k<c;){if(0!=l)b=0;else return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);l--;n|=(d.next_in[m++]&255)<<k;k+=8}c=3*(this.tree_index+(n&f[c]));n>>>=this.tree[c+1];k-=this.tree[c+1];g=this.tree[c];if(0==g){this.lit=this.tree[c+2];this.mode=6;break}if(0!=(g&16)){this.get=g&15;this.len=this.tree[c+2];this.mode=2;break}if(0==(g&64)){this.need=g;this.tree_index=c/3+this.tree[c+2];break}if(0!=(g&32)){this.mode=7;break}this.mode=
9;d.msg="invalid literal/length code";b=-3;a.bitb=n;a.bitk=k;d.avail_in=l;d.total_in+=m-d.next_in_index;d.next_in_index=m;a.write=h;return a.inflate_flush(d,b);case 2:for(c=this.get;k<c;){if(0!=l)b=0;else return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);l--;n|=(d.next_in[m++]&255)<<k;k+=8}this.len+=n&f[c];n>>=c;k-=c;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(c=this.need;k<c;){if(0!=
l)b=0;else return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);l--;n|=(d.next_in[m++]&255)<<k;k+=8}c=3*(this.tree_index+(n&f[c]));n>>=this.tree[c+1];k-=this.tree[c+1];g=this.tree[c];if(0!=(g&16)){this.get=g&15;this.dist=this.tree[c+2];this.mode=4;break}if(0==(g&64)){this.need=g;this.tree_index=c/3+this.tree[c+2];break}this.mode=9;d.msg="invalid distance code";b=-3;a.bitb=n;a.bitk=k;d.avail_in=l;d.total_in+=m-d.next_in_index;d.next_in_index=
m;a.write=h;return a.inflate_flush(d,b);case 4:for(c=this.get;k<c;){if(0!=l)b=0;else return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);l--;n|=(d.next_in[m++]&255)<<k;k+=8}this.dist+=n&f[c];n>>=c;k-=c;this.mode=5;case 5:for(c=h-this.dist;0>c;)c+=a.end;for(;0!=this.len;){if(0==t&&(h==a.end&&0!=a.read&&(h=0,t=h<a.read?a.read-h-1:a.end-h),0==t&&(a.write=h,b=a.inflate_flush(d,b),h=a.write,t=h<a.read?a.read-h-1:a.end-h,h==a.end&&0!=a.read&&
(h=0,t=h<a.read?a.read-h-1:a.end-h),0==t)))return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);a.window[h++]=a.window[c++];t--;c==a.end&&(c=0);this.len--}this.mode=0;break;case 6:if(0==t&&(h==a.end&&0!=a.read&&(h=0,t=h<a.read?a.read-h-1:a.end-h),0==t&&(a.write=h,b=a.inflate_flush(d,b),h=a.write,t=h<a.read?a.read-h-1:a.end-h,h==a.end&&0!=a.read&&(h=0,t=h<a.read?a.read-h-1:a.end-h),0==t)))return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=
m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);b=0;a.window[h++]=this.lit;t--;this.mode=0;break;case 7:7<k&&(k-=8,l++,m--);a.write=h;b=a.inflate_flush(d,b);h=a.write;if(a.read!=a.write)return a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);this.mode=8;case 8:return b=1,a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);case 9:return b=-3,a.bitb=n,a.bitk=k,d.avail_in=
l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b);default:return b=-2,a.bitb=n,a.bitk=k,d.avail_in=l,d.total_in+=m-d.next_in_index,d.next_in_index=m,a.write=h,a.inflate_flush(d,b)}};I.prototype.free=function(a){};I.prototype.inflate_fast=function(a,b,e,c,g,k,h,m){var l,u,v,w,A,x,B,y,D,F,G,E;x=m.next_in_index;B=m.avail_in;w=h.bitb;A=h.bitk;y=h.write;D=y<h.read?h.read-y-1:h.end-y;a=f[a];F=f[b];do{for(;20>A;)B--,w|=(m.next_in[x++]&255)<<A,A+=8;l=w&a;u=e;v=c;E=3*(v+l);if(0==
(b=u[E]))w>>=u[E+1],A-=u[E+1],h.window[y++]=u[E+2],D--;else{do{w>>=u[E+1];A-=u[E+1];if(0!=(b&16)){b&=15;G=u[E+2]+(w&f[b]);w>>=b;for(A-=b;15>A;)B--,w|=(m.next_in[x++]&255)<<A,A+=8;l=w&F;u=g;v=k;E=3*(v+l);b=u[E];do if(w>>=u[E+1],A-=u[E+1],0!=(b&16)){for(b&=15;A<b;)B--,w|=(m.next_in[x++]&255)<<A,A+=8;l=u[E+2]+(w&f[b]);w>>=b;A-=b;D-=G;if(y>=l)l=y-l,h.window[y++]=h.window[l++],h.window[y++]=h.window[l++],G-=2;else{l=y-l;do l+=h.end;while(0>l);b=h.end-l;if(G>b){G-=b;if(0<y-l&&b>y-l){do h.window[y++]=h.window[l++];
while(0!=--b)}else t(h.window,l,h.window,y,b),y+=b;l=0}}do h.window[y++]=h.window[l++];while(0!=--G);break}else if(0==(b&64))l+=u[E+2],l+=w&f[b],E=3*(v+l),b=u[E];else return m.msg="invalid distance code",G=m.avail_in-B,G=A>>3<G?A>>3:G,B+=G,x-=G,A-=G<<3,h.bitb=w,h.bitk=A,m.avail_in=B,m.total_in+=x-m.next_in_index,m.next_in_index=x,h.write=y,-3;while(1);break}if(0==(b&64)){if(l+=u[E+2],l+=w&f[b],E=3*(v+l),0==(b=u[E])){w>>=u[E+1];A-=u[E+1];h.window[y++]=u[E+2];D--;break}}else{if(0!=(b&32))return G=m.avail_in-
B,G=A>>3<G?A>>3:G,B+=G,x-=G,A-=G<<3,h.bitb=w,h.bitk=A,m.avail_in=B,m.total_in+=x-m.next_in_index,m.next_in_index=x,h.write=y,1;m.msg="invalid literal/length code";G=m.avail_in-B;G=A>>3<G?A>>3:G;B+=G;x-=G;A-=G<<3;h.bitb=w;h.bitk=A;m.avail_in=B;m.total_in+=x-m.next_in_index;m.next_in_index=x;h.write=y;return-3}}while(1)}}while(258<=D&&10<=B);G=m.avail_in-B;G=A>>3<G?A>>3:G;x-=G;h.bitb=w;h.bitk=A-(G<<3);m.avail_in=B+G;m.total_in+=x-m.next_in_index;m.next_in_index=x;h.write=y;return 0};v.prototype.huft_build=
function(a,b,e,c,f,g,k,h,l,u,v){var w,A,x,B,y,D,E,G,F;D=0;A=e;do this.c[a[b+D]]++,D++,A--;while(0!=A);if(this.c[0]==e)return k[0]=-1,h[0]=0;y=h[0];for(x=1;15>=x&&0==this.c[x];x++);B=x;y<x&&(y=x);for(A=15;0!=A&&0==this.c[A];A--);u=A;y>A&&(y=A);h[0]=y;for(h=1<<x;x<A;x++,h<<=1)if(0>(h-=this.c[x]))return-3;if(0>(h-=this.c[A]))return-3;this.c[A]+=h;this.x[1]=x=0;D=1;for(E=2;0!=--A;)this.x[E]=x+=this.c[D],E++,D++;D=A=0;do 0!=(x=a[b+D])&&(this.v[this.x[x]++]=A),D++;while(++A<e);e=this.x[u];D=this.x[0]=A=
0;b=-1;G=-y;for(F=E=this.u[0]=0;B<=u;B++)for(a=this.c[B];0!=a--;){for(;B>G+y;){b++;G+=y;F=u-G;F=F>y?y:F;if((w=1<<(x=B-G))>a+1&&(w-=a+1,E=B,x<F))for(;++x<F&&!((w<<=1)<=this.c[++E]);)w-=this.c[E];F=1<<x;if(1440<this.hn[0]+F)return-3;this.u[b]=E=this.hn[0];this.hn[0]+=F;0!=b?(this.x[b]=A,this.r[0]=x,this.r[1]=y,x=A>>>G-y,this.r[2]=E-this.u[b-1]-x,t(this.r,0,l,3*(this.u[b-1]+x),3)):k[0]=E}this.r[1]=B-G;D>=e?this.r[0]=192:v[D]<c?(this.r[0]=256>this.v[D]?0:96,this.r[2]=this.v[D++]):(this.r[0]=g[this.v[D]-
c]+16+64,this.r[2]=f[this.v[D++]-c]);w=1<<B-G;for(x=A>>>G;x<F;x+=w)t(this.r,0,l,3*(E+x),3);for(x=1<<B-1;0!=(A&x);x>>>=1)A^=x;A^=x;for(x=(1<<G)-1;(A&x)!=this.x[b];)b--,G-=y,x=(1<<G)-1}return 0!=h&&1!=u?-5:0};v.prototype.inflate_trees_bits=function(a,b,c,f,g){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,f,this.hn,this.v);if(-3==a)g.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])g.msg="incomplete dynamic bit lengths tree",a=-3;return a};v.prototype.inflate_trees_dynamic=
function(a,b,c,f,g,h,k,l,t){this.initWorkArea(288);this.hn[0]=0;h=this.huft_build(c,0,a,257,E,J,h,f,l,this.hn,this.v);if(0!=h||0==f[0])return-3==h?t.msg="oversubscribed literal/length tree":-4!=h&&(t.msg="incomplete literal/length tree",h=-3),h;this.initWorkArea(288);h=this.huft_build(c,a,b,0,K,B,k,g,l,this.hn,this.v);return 0!=h||0==g[0]&&257<a?(-3==h?t.msg="oversubscribed distance tree":-5==h?(t.msg="incomplete distance tree",h=-3):-4!=h&&(t.msg="empty distance tree with lengths",h=-3),h):0};v.prototype.initWorkArea=
function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;t(this.c,0,this.u,0,15);t(this.c,0,this.x,0,16)};var M="function"===typeof(new Uint8Array(1)).subarray;"undefined"!==typeof D&&(D.exports={inflateBuffer:F,arrayCopy:t})},{}]},{},[7]);
